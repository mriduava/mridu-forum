(this.webpackJsonpmriduforum=this.webpackJsonpmriduforum||[]).push([[0],{62:function(e,t,c){},78:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(3),a=c.n(n),r=c(28),i=c.n(r),l=(c(62),c(12)),j=c(13),o=c(7),b=c.n(o),d=c(10),u=c(5),h=Object(n.createContext)(),x=function(e){var t=Object(n.useState)(),c=Object(u.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(),l=Object(u.a)(i,2),j=l[0],o=l[1],x=Object(n.useState)(),m=Object(u.a)(x,2),O=m[0],p=m[1],f=Object(n.useState)(),g=Object(u.a)(f,2),N=g[0],v=g[1],y=Object(n.useState)(),S=Object(u.a)(y,2),w=S[0],k=S[1],C=Object(n.useState)(),T=Object(u.a)(C,2),U=T[0],E=T[1],I=function(){var e=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,r(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(b.a.mark((function e(t,c){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums/".concat(t));case 2:return s=e.sent,e.next=5,s.json();case 5:s=e.sent,o(s.threads),v(t),E(c);case 9:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(b.a.mark((function e(t,c){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums/".concat(t,"/").concat(c));case 2:return s=e.sent,e.next=5,s.json();case 5:s=e.sent,p(s),k(c);case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){I()}),[]);var P={fetchFroums:I,subjects:a,fetchFroumById:F,threads:j,fetchThreadById:D,thread:O,subjectId:N,subjectName:U,threadId:w};return Object(s.jsx)(h.Provider,{value:P,children:e.children})},m=c(79),O=c(80),p=c(81),f=c.p+"static/media/waves.3e7f877a.png",g=function(e){return Object(s.jsx)("div",{className:"jumbotron mb-2 text-center",style:{backgroundImage:"url(".concat(f,")"),backgroundSize:"cover"},children:Object(s.jsxs)("p",{className:"home-text",children:["Storms don't ",Object(s.jsx)("br",{})," last forever"]})})},N=function(){var e=Object(n.useContext)(h),t=e.subjects,c=e.fetchFroumById;return Object(s.jsxs)("div",{children:[Object(s.jsx)(p.a,{fluid:!0,className:"px-0",children:Object(s.jsx)(m.a,{className:"mx-0 px-0 jumbotron-area",children:Object(s.jsx)(O.a,{lg:"12",className:"px-0",children:Object(s.jsx)(g,{})})})}),Object(s.jsx)(p.a,{className:"mx-auto px-0",children:Object(s.jsx)(m.a,{className:"foram-area",children:Object(s.jsxs)(O.a,{lg:"12",children:[Object(s.jsxs)(m.a,{className:"text-white border border-rounded pt-2 mb-3 forum-bar",style:{margin:"0 0.5px 0 0.5px",borderRadius:"5px"},children:[Object(s.jsx)(O.a,{xs:"12",sm:"8",children:Object(s.jsx)("h4",{className:"pl-2",children:"Forums"})}),Object(s.jsx)(O.a,{sm:"4",className:"text-right d-none d-md-block d-sm-block d-lg-block",children:Object(s.jsx)("h4",{children:"Threads"})})]}),t&&t.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{className:"mx-0",children:[Object(s.jsx)(O.a,{xs:"12",sm:"8",children:Object(s.jsxs)(l.b,{to:"/".concat(e.subject),style:{textDecoration:"none"},onClick:function(){return c(e._id,e.subject)},children:[Object(s.jsx)("h2",{className:"text-secondary mt-1 px-2",children:e.subject}),Object(s.jsx)("p",{className:"text-dark text-justify px-2",children:e.description})]})}),Object(s.jsx)(O.a,{sm:"4",className:"mt-5 text-right d-none d-sm-block d-md-block d-lg-block pr-4",children:Object(s.jsx)("h5",{children:e.threads.length})})]}),Object(s.jsx)("hr",{})]},"sub"+e._id+t)}))]})})})]})},v=c(21),y=function(){var e=Object(n.useContext)(h),t=e.threads,c=e.subjectId,a=e.subjectName,r=e.fetchThreadById,i=Object(v.useSpring)({to:{opacity:1},from:{opacity:0}});return Object(s.jsxs)(p.a,{className:"themed-container",children:[Object(s.jsxs)(m.a,{className:"text-light pt-2 mb-3 thread-bar",children:[Object(s.jsx)(O.a,{xs:"9",sm:"8",children:Object(s.jsxs)("h5",{children:[Object(s.jsx)(l.b,{to:"/",style:{textDecoration:"none"},children:Object(s.jsx)("span",{className:"subject-name",children:" Home "})}),"\xbb ",a]})}),Object(s.jsx)(O.a,{xs:"3",sm:"4",className:"text-lg-right d-none d-lg-block",children:Object(s.jsx)("h5",{children:"Answers"})})]}),Object(s.jsx)(v.animated.div,{style:i,children:t&&t.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsx)(O.a,{xs:"9",sm:"8",children:Object(s.jsxs)(l.b,{to:"/".concat(a,"/").concat(e.topic),style:{textDecoration:"none"},onClick:function(){return r(c,e._id)},children:[Object(s.jsx)("h5",{className:"text-secondary mt-1 pb-0",children:e.topic}),Object(s.jsxs)("p",{className:"text-primary mt-0 pt-0",children:["Writer: ",e.author.username.toUpperCase()]})]})}),Object(s.jsx)(O.a,{xs:"3",sm:"4",className:"text-right mt-2 d-none d-lg-block",children:e.posts.length})]}),Object(s.jsx)("hr",{className:"mt-1"})]},"sub"+e._id+t)}))})]})},S=Object(n.createContext)(),w=function(e){var t=Object(n.useState)(null),c=Object(u.a)(t,2),a=c[0],r=c[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("token"));e&&r(e)}),[]);var i={user:a,setUser:r};return Object(s.jsx)(S.Provider,{value:i,children:e.children})},k=c(82),C=c(83),T=c(84),U=c(54),E=c.n(U),I=function(){var e=Object(n.useContext)(h),t=e.subjectName,c=e.thread,a=e.subjectId,r=e.threadId,i=e.fetchThreadById,j=Object(n.useContext)(S).user,o=Object(n.useState)(""),x=Object(u.a)(o,2),f=x[0],g=x[1],N=Object(n.useState)(!1),y=Object(u.a)(N,2),w=y[0],U=y[1],I=Object(n.useState)(!1),F=Object(u.a)(I,2),D=F[0],P=F[1],R=Object(n.useState)(""),M=Object(u.a)(R,2),A=M[0],L=M[1],z=Object(v.useSpring)({to:{opacity:1},from:{opacity:0}}),B=function(e){return E()(e).format("YYYY-MM-DD, H:mm")},H=function(){return U(!w)},_=function(){return P(!D)},q=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(a,"/").concat(r),{method:"PUT",body:JSON.stringify({topic:c.topic,text:A}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&(i(a,r),L(""),_())}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums/".concat(a,"/").concat(r),{method:"DELETE"}).then((function(e){e.ok&&z.history.push("/")})).catch((function(e){return Promise.reject()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(a,"/").concat(r),{method:"POST",body:JSON.stringify({text:f}),headers:{"Content-Type":"application/json"}}).then((function(e){g(""),H(),i(a,r)})).catch((function(e){return Promise.reject()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(p.a,{className:"themed-container",children:[Object(s.jsx)(v.animated.div,{style:z,children:c&&Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{className:"text-light pt-2 thread-bar",children:[Object(s.jsx)(O.a,{xs:"12",sm:"12",md:"8",children:Object(s.jsxs)("h5",{children:[Object(s.jsx)(l.b,{to:"/",style:{textDecoration:"none"},children:Object(s.jsx)("span",{className:"subject-name",children:" Home "})}),"\xbb",Object(s.jsx)(l.b,{to:"/".concat(t),style:{textDecoration:"none"},children:Object(s.jsxs)("span",{className:"subject-name",children:[" ",t," "]})}),"\xbb ",c.topic]})}),Object(s.jsx)(O.a,{xs:"0",sm:"0",md:"4",className:"text-lg-right d-none d-lg-block",children:Object(s.jsxs)("h5",{children:[c.posts.length," Comments"]})})]}),Object(s.jsxs)(m.a,{className:"mt-3",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(s.jsx)("p",{className:"mb-0 text-danger",children:"Writer"}),Object(s.jsx)("h4",{className:"text-secondary pb-2",children:c.author.username.toUpperCase()})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(s.jsx)("p",{className:"mb-0",children:B(c.created)}),Object(s.jsx)("p",{className:"text-dark mt-1 text-justify",style:{whiteSpace:"pre-wrap"},children:c.text}),function(){if(null!==j)return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("hr",{className:"p-0 m-0"}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-3 mr-2",onClick:function(){return H()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Reply"})]})}(),function(){if(null!==j&&(j.id===c.author.id||"admin"===j.role||"moderator"===j.role))return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{className:"btn btn-outline-primary mt-3 mr-2",onClick:function(){return _()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Edit"}),Object(s.jsx)("button",{className:"btn btn-outline-danger mt-3",onClick:function(){return J()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Delete"})]})}()]})]}),Object(s.jsx)("hr",{}),Object(s.jsx)(T.a,{in:w,tag:"h5",className:"mt-3",children:w&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(s.jsx)("h5",{className:"text-secondary",children:j.username.toUpperCase()}),Object(s.jsx)("p",{className:"pb-2 text-warning",children:"is going to reply"})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(s.jsxs)(k.a,{onSubmit:W,children:[Object(s.jsx)(C.a,{children:Object(s.jsx)("textarea",{name:"text",id:"text",placeholder:"Write your comment here...",className:"form-control",pattern:".{100, 5000}",required:!0,minLength:"100",value:f,onChange:function(e){return g(e.target.value)}})}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"162px",fontSize:"13px",paddingTop:"2px"},children:"Submit Comment"})]}),Object(s.jsx)("button",{className:"btn btn-outline-danger mt-0",onClick:function(){return H()},style:{position:"relative",left:170,top:-25,height:"26px",width:"120px",fontSize:"13px",paddingTop:"2px"},children:"Cancel"})]})]}),Object(s.jsx)("hr",{})]})}),Object(s.jsx)(T.a,{in:D,tag:"h5",className:"mt-3",children:D&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(s.jsx)("h5",{className:"text-secondary",children:j.username.toUpperCase()}),Object(s.jsx)("p",{className:"pb-2 text-warning",children:"is going to modify"})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(s.jsxs)(k.a,{onSubmit:q,children:[Object(s.jsx)(C.a,{children:Object(s.jsx)("textarea",{name:"text",id:"text",placeholder:"Write your comment here...",className:"form-control",pattern:".{20, 5000}",required:!0,minLength:"20",defaultValue:c.text,onChange:function(e){return L(e.target.value)}})}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"162px",fontSize:"13px",paddingTop:"2px"},children:"Submit Updated Text"})]}),Object(s.jsx)("button",{className:"btn btn-outline-danger mt-0",onClick:function(){return _()},style:{position:"relative",left:170,top:-25,height:"26px",width:"120px",fontSize:"13px",paddingTop:"2px"},children:"Cancel"})]})]}),Object(s.jsx)("hr",{})]})})]},"sub"+c._id)}),Object(s.jsx)(v.animated.div,{style:z,children:c&&c.posts.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(s.jsx)("p",{className:"mb-0 text-success",children:"Replied by"}),Object(s.jsx)("h5",{className:"text-secondary pb-2",children:e.author.username.toUpperCase()})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(s.jsx)("p",{className:"mb-0",children:B(e.created)}),Object(s.jsx)("p",{className:"text-secondary mt-1 text-justify",children:e.text})]})]}),Object(s.jsx)("hr",{})]},"pos"+e._id)}))})]})},F=c(85),D=c(86),P=c(87),R=c(88),M=c(89),A=function(e){var t=Object(n.useState)(!1),c=Object(u.a)(t,2),a=c[0],r=c[1],i=Object(n.useContext)(S),j=i.user,o=i.setUser,h=Object(n.useState)(!1),x=Object(u.a)(h,2),m=x[0],O=x[1],f=function(){var e=window.scrollY;O(e>200)};Object(n.useEffect)((function(){window.addEventListener("scroll",f)}),[]),Object(n.useEffect)((function(){m?document.getElementById("sticky").classList.add("sticky-top"):document.getElementById("sticky").classList.remove("sticky-top")}),[m]);var g=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/logout");case 2:o(null),localStorage.removeItem("token");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)("div",{className:"navbar px-0 py-0",id:"sticky",children:Object(s.jsx)(p.a,{className:"px-lg-0",children:Object(s.jsxs)(F.a,{light:!0,expand:"md",className:"px-0",children:[Object(s.jsx)(l.b,{to:"/",className:"navbar-brand text-datk font-weight-bold",children:Object(s.jsx)("h3",{children:"MRIDU FORUM"})}),Object(s.jsx)(D.a,{onClick:function(){return r(!a)}}),Object(s.jsx)(P.a,{isOpen:a,navbar:!0,children:Object(s.jsxs)(R.a,{className:"ml-auto mt-2 right-nav",navbar:!0,children:[Object(s.jsx)(M.a,{children:Object(s.jsx)(l.b,{to:"/about",children:Object(s.jsx)("h5",{className:"text-dark mr-lg-4",children:"ABOUT"})})}),j?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(M.a,{children:Object(s.jsx)(l.b,{to:"/mypage",children:Object(s.jsx)("h5",{className:"text-dark mr-lg-4",children:"MY PAGE"})})}),Object(s.jsx)(M.a,{children:Object(s.jsx)(l.b,{onClick:g,to:"/",children:Object(s.jsx)("h5",{className:"text-dark",children:"LOGOUT"})})})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(M.a,{children:Object(s.jsx)(l.b,{to:"/register",children:Object(s.jsx)("h5",{className:"text-dark mr-lg-4",children:"REGISTER"})})}),Object(s.jsx)(M.a,{children:Object(s.jsx)(l.b,{to:"/signin",children:Object(s.jsx)("h5",{className:"text-dark",children:"SIGN IN"})})})]})]})})]})})})},L=c(27),z=c(38),B=c(55);L.b.add(B.a);var H=function(){return Object(s.jsxs)("div",{className:"footer",children:[Object(s.jsx)(p.a,{className:"bottom footer-bar",fluid:!0,children:Object(s.jsx)(m.a,{children:Object(s.jsx)(O.a,{lg:"12",className:"px-0",children:Object(s.jsx)("div",{className:"footer-bar"})})})}),Object(s.jsx)("div",{className:"footer-top",children:Object(s.jsx)(p.a,{className:"px-lg-0",children:Object(s.jsxs)(m.a,{className:"",children:[Object(s.jsxs)(O.a,{lg:"4",className:"pt-3",children:[Object(s.jsx)("p",{className:"mb-0 font-weight-bold text-priamry",children:"CONTACT"}),Object(s.jsx)("hr",{className:"my-0 bg-secondary"}),Object(s.jsx)("p",{className:"mb-0",children:Object(s.jsx)("span",{className:"text-white",children:"MARUF AHMED"})}),Object(s.jsxs)("p",{className:"mb-0 ",children:[Object(s.jsx)("span",{className:"text-white",children:"Email: "}),Object(s.jsx)("span",{className:"text-white",children:"maruf.ahmed@live.se"})]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("span",{className:"text-white",children:"GitHub :"}),Object(s.jsx)("span",{className:"text-white",children:" github.com/mriduava/mridu-forum"})]})]}),Object(s.jsxs)(O.a,{lg:"4",className:"pt-3 text-lg-center",children:[Object(s.jsx)("p",{className:"mb-0 font-weight-bold text-priamry",children:"MEDIA ICONS"}),Object(s.jsx)("hr",{className:"my-0 bg-secondary"}),Object(s.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(s.jsx)("h4",{className:"mt-3 mr-1",children:Object(s.jsx)("span",{className:"text-white",children:Object(s.jsx)(z.a,{icon:["fab","linkedin"]})})}),Object(s.jsx)("h4",{className:"mt-3 mx-1",children:Object(s.jsx)("span",{className:"text-white",children:Object(s.jsx)(z.a,{icon:["fab","facebook"]})})}),Object(s.jsx)("h4",{className:"mt-3 mx-1",children:Object(s.jsx)("span",{className:"text-white",children:Object(s.jsx)(z.a,{icon:["fab","github"]})})})]})]}),Object(s.jsxs)(O.a,{lg:"4",className:"text-lg-right pt-3",children:[Object(s.jsx)("p",{className:"mb-0 font-weight-bold text-priamry",children:"USEFUL LINK"}),Object(s.jsx)("hr",{className:"my-0 bg-secondary"}),Object(s.jsx)(l.b,{className:"text-dark",to:"/signin",children:Object(s.jsx)("p",{className:"mb-0",children:Object(s.jsx)("span",{className:"text-white",children:"SIGN IN"})})}),Object(s.jsx)(l.b,{className:"text-dark",to:"/register",children:Object(s.jsx)("p",{className:"mb-0",children:Object(s.jsx)("span",{className:"text-white",children:"REGISTER"})})}),Object(s.jsx)(l.b,{className:"text-dark",to:"/about",children:Object(s.jsx)("p",{className:"mb-0",children:Object(s.jsx)("span",{className:"text-white",children:"ABOUT"})})})]})]})})}),Object(s.jsx)(p.a,{fluid:!0,children:Object(s.jsx)(m.a,{children:Object(s.jsx)(O.a,{lg:"12",className:"footer-bottom",children:Object(s.jsx)("div",{style:{height:"30px"},children:Object(s.jsx)("p",{className:"mb-0",children:"\xa9 2021 MARUF AHMED"})})})})})]})},_=c(90),q=c(91),J=function(e){var t=Object(n.useContext)(S).setUser,c=Object(n.useState)(""),a=Object(u.a)(c,2),r=a[0],i=a[1],l=Object(n.useState)(""),j=Object(u.a)(l,2),o=j[0],h=j[1],x=Object(n.useState)(""),f=Object(u.a)(x,2),g=f[0],N=f[1],v=function(e,t){return!!(new RegExp("^[_A-z0-9]{1,}$").test(e)&&e.length>=t)},y=function(){var c=Object(d.a)(b.a.mark((function c(s){var n;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(s.preventDefault(),v(r,3)){c.next=4;break}return N("Username must be at least 3 characters without space!"),c.abrupt("return");case 4:if(v(o,6)){c.next=7;break}return N("Password must be at least 6 characters without space!"),c.abrupt("return");case 7:return n={username:r,password:o},c.next=10,fetch("/register",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(c){c.ok?(c=c.json(),Promise.resolve(c).then((function(e){return t(e)})),e.history.push("/signin")):N("Username is used!")})).catch((function(e){return Promise.reject()}));case 10:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(s.jsx)(p.a,{className:"border border-secondary pb-5 register-area",style:{minHeight:"80vh"},children:Object(s.jsx)(m.a,{children:Object(s.jsxs)(O.a,{xs:"12",sm:"8",md:"6",lg:"5",className:"mx-auto m-5 border border-rounded p-5",children:[Object(s.jsx)("h4",{className:"text-dark font-weight-bold",children:"Registration"}),Object(s.jsx)("hr",{}),Object(s.jsxs)(k.a,{onSubmit:y,children:[Object(s.jsxs)(C.a,{children:[Object(s.jsx)(_.a,{for:"username",children:"Username"}),Object(s.jsx)(q.a,{type:"username",name:"username",id:"username",value:r,onChange:function(e){return i(e.target.value)},required:!0})]}),Object(s.jsxs)(C.a,{children:[Object(s.jsx)(_.a,{for:"password",children:"Password"}),Object(s.jsx)(q.a,{type:"password",name:"password",id:"password",value:o,onChange:function(e){return h(e.target.value)},required:!0})]}),Object(s.jsx)("button",{className:"btn btn-block btn-outline-success mt-4",children:"SUBMIT"}),Object(s.jsx)("div",{className:"pt-2 text-danger",children:g})]})]})})})},W=c(92),G=function(e){var t=Object(n.useContext)(S).setUser,c=Object(n.useState)(""),a=Object(u.a)(c,2),r=a[0],i=a[1],l=Object(n.useState)(""),j=Object(u.a)(l,2),o=j[0],h=j[1],x=Object(n.useState)(""),f=Object(u.a)(x,2),g=f[0],N=f[1],v=function(){var c=Object(d.a)(b.a.mark((function c(s){var n;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),n={username:r,password:o},c.next=4,fetch("/login",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(c){c.ok?(c=c.json(),Promise.resolve(c).then((function(e){t(e),localStorage.setItem("token",JSON.stringify(e))})),e.history.push("/mypage")):N("Username or Password incorrect!")})).catch((function(e){return Promise.reject()}));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(s.jsx)(p.a,{className:"border border-secondary pb-5",style:{minHeight:"80vh"},children:Object(s.jsx)(m.a,{children:Object(s.jsxs)(O.a,{xs:"12",sm:"8",md:"6",lg:"5",className:"mx-auto m-5 border border-rounded p-5",children:[Object(s.jsx)("h4",{className:"text-dark font-weight-bold",children:"Sign in"}),Object(s.jsx)("hr",{}),Object(s.jsx)("div",{className:"d-block",children:Object(s.jsxs)("a",{href:"http://localhost:3200/auth/google",className:"btn btn-outline-danger d-block",children:[Object(s.jsx)("span",{className:"fa fa-google"})," SignIn with Google"]})}),Object(s.jsx)("hr",{}),Object(s.jsxs)(k.a,{onSubmit:v,children:[Object(s.jsxs)(C.a,{children:[Object(s.jsx)(_.a,{for:"username",children:"Username"}),Object(s.jsx)(q.a,{type:"username",name:"username",id:"username",value:r,onChange:function(e){return i(e.target.value)},required:!0}),Object(s.jsx)(W.a,{valid:!0,children:"Username is not correct!"})]}),Object(s.jsxs)(C.a,{children:[Object(s.jsx)(_.a,{for:"password",children:"Password"}),Object(s.jsx)(q.a,{type:"password",name:"password",id:"password",value:o,onChange:function(e){return h(e.target.value)},required:!0}),Object(s.jsx)(W.a,{children:"Wrong password!"})]}),Object(s.jsx)("button",{className:"btn btn-block btn-outline-success mt-4",children:"SUBMIT"}),Object(s.jsx)("div",{className:"pt-2 text-danger",children:g})]})]})})})},Y=function(){var e=Object(v.useSpring)({to:{opacity:1},from:{opacity:0}});return Object(s.jsx)(p.a,{style:{textAlign:"center",minHeight:"80vh"},className:"border border-secondary pb-5",children:Object(s.jsx)(v.animated.div,{style:e,children:Object(s.jsx)("h1",{style:{marginTop:"10%"},children:"THIS IS A DEMO WEB SITE"})})})},K=function(){var e=Object(n.useContext)(h).subjects,t=Object(n.useState)(""),c=Object(u.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(""),l=Object(u.a)(i,2),j=l[0],o=l[1],x=Object(n.useState)(""),m=Object(u.a)(x,2),O=m[0],p=m[1],f=Object(n.useState)(""),g=Object(u.a)(f,2),N=g[0],v=g[1];Object(n.useEffect)((function(){var e=setTimeout((function(){null!==N&&v(null)}),3e3);return function(){return clearTimeout(e)}}),[N]);var y=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(a),{method:"POST",body:JSON.stringify({topic:j,text:O}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){e.ok?(v("Thread submission successful!"),r(""),o(""),p("")):v("Thread submission failed!")})).catch((function(e){return Promise.reject()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(k.a,{className:"mt-3 mb-4",onSubmit:y,children:[Object(s.jsx)(C.a,{children:e&&Object(s.jsxs)(q.a,{type:"select",name:"select",id:"exampleSelect",required:!0,onChange:function(e){return r(e.target.value)},children:[Object(s.jsx)("option",{value:"",children:"Select a Sub-Forum"}),e.map((function(e,t){return Object(s.jsx)("option",{value:e._id,children:e.subject},"sub"+e._id+t)}))]})}),Object(s.jsx)(C.a,{children:Object(s.jsx)(q.a,{type:"text",name:"topic",id:"topic",placeholder:"Write a title...",minLength:"6",value:j,onChange:function(e){return o(e.target.value)},required:!0})}),Object(s.jsx)(C.a,{children:Object(s.jsx)(q.a,{type:"textarea",name:"text",id:"text",placeholder:"Write in detail...",minLength:"15",value:O,onChange:function(e){return p(e.target.value)},required:!0})}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"190px",fontSize:"13px",paddingTop:"2px"},children:"Submit Thread"})]}),N&&Object(s.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:N}),Object(s.jsx)("hr",{})]})},V=function(){var e=Object(n.useContext)(S).user,t=Object(n.useState)([]),c=Object(u.a)(t,2),a=c[0],r=c[1],i=Object(v.useSpring)({to:{opacity:1},from:{opacity:0}});Object(n.useEffect)((function(){(function(){var t=Object(d.a)(b.a.mark((function t(){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/search/mythreads?username=".concat(e.username));case 2:return c=t.sent,t.next=5,c.json();case 5:c=t.sent,r(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.username]);return Object(s.jsx)(m.a,{children:Object(s.jsx)(O.a,{lg:"12",children:Object(s.jsx)(v.animated.div,{className:"my-threads",style:i,children:a&&a.map((function(e,t){return Object(s.jsx)("ul",{children:Object(s.jsxs)("li",{children:[t+1,".",Object(s.jsxs)("span",{children:[" ",e.topic]})]})},"sub"+e._id+t)}))})})})},$=function(){var e=Object(n.useContext)(h).fetchFroums,t=Object(n.useState)(""),c=Object(u.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(""),l=Object(u.a)(i,2),j=l[0],o=l[1],x=Object(n.useState)(),m=Object(u.a)(x,2),O=m[0],p=m[1];Object(n.useEffect)((function(){var e=setTimeout((function(){null!==O&&p(null)}),3e3);return function(){return clearTimeout(e)}}),[O]);var f=function(){var t=Object(d.a)(b.a.mark((function t(c){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,fetch("/api/forums/",{method:"POST",body:JSON.stringify({subject:a,description:j}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){e(),t.ok?(p("Sub-Forum submission successful!"),r(""),o("")):p("Sub-Forum submission failed!")})).catch((function(e){return Promise.reject()}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(k.a,{className:"mt-3 mb-4",onSubmit:f,children:[Object(s.jsx)(C.a,{children:Object(s.jsx)(q.a,{type:"select",name:"select",id:"exampleSelect",disabled:!0,children:Object(s.jsx)("option",{value:"",disabled:!0,children:"Select a Sub-Forum"})})}),Object(s.jsx)(C.a,{children:Object(s.jsx)(q.a,{type:"text",name:"topic",id:"topic",placeholder:"Write a forum subject..",value:a,onChange:function(e){return r(e.target.value)},required:!0})}),Object(s.jsx)(C.a,{children:Object(s.jsx)(q.a,{type:"textarea",name:"text",id:"text",placeholder:"Write forum description...",value:j,onChange:function(e){return o(e.target.value)},required:!0})}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"190px",fontSize:"13px",paddingTop:"2px"},children:"Submit Sub-Forum"})]}),O&&Object(s.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:O}),Object(s.jsx)("hr",{})]})},Q=function(){var e=Object(n.useContext)(S).user,t=Object(n.useState)(!0),c=Object(u.a)(t,2),a=c[0],r=c[1],i=function(){return r(!a)},l=Object(n.useState)(!0),j=Object(u.a)(l,2),o=j[0],h=j[1],x=function(){return h(!o)},f=Object(n.useState)(""),g=Object(u.a)(f,2),N=g[0],v=g[1],y=Object(n.useState)(null),w=Object(u.a)(y,2),T=w[0],U=w[1],E=Object(n.useState)(""),I=Object(u.a)(E,2),F=I[0],D=I[1],P=Object(n.useState)(null),R=Object(u.a)(P,2),M=R[0],A=R[1],L=Object(n.useState)(null),z=Object(u.a)(L,2),B=z[0],H=z[1],_=Object(n.useState)(null),J=Object(u.a)(_,2),G=J[0],Y=J[1],Q=Object(n.useState)(null),X=Object(u.a)(Q,2),Z=X[0],ee=X[1],te=function(){var e=Object(d.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/search/user?username=".concat(N,"&role=").concat(N));case 3:return c=e.sent,e.next=6,c.json();case 6:c=e.sent,U(c),v("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/".concat(t),{method:"DELETE"}).then((function(e){e.ok&&(H(null),ee("The user has been deleted!"))})).catch((function(e){return Promise.reject()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e,t,c){A(e),H(t),Y(c),U(null),D(c)},ne=function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/users?username=".concat(B),{method:"PUT",body:JSON.stringify({role:F}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?(H(null),ee("Role setting successful!")):ee("Role setting failed!")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=setTimeout((function(){null!==Z&&ee(null)}),3e3);return function(){return clearTimeout(e)}}),[Z]);return Object(s.jsxs)(p.a,{className:"border border-warning pb-5",style:{minHeight:"80vh"},children:[Object(s.jsx)(m.a,{className:"d-flex flex-column",children:Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(s.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(s.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(s.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(s.jsx)("hr",{}),Object(s.jsxs)(m.a,{className:"mx-auto",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)(m.a,{className:"d-flex",children:Object(s.jsxs)(O.a,{lg:"12",className:"d-flex justify-content-between",children:[Object(s.jsx)("button",{className:"btn btn-outline-primary m-0",disabled:o,onClick:x,children:"Create a Thread"}),Object(s.jsx)("button",{className:"btn btn-outline-primary align-self-end ",disabled:!o,onClick:x,children:"Create a Sub-Forum"})]})}),Object(s.jsx)("hr",{className:"ml-1"}),o?Object(s.jsx)(K,{}):Object(s.jsx)($,{})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)(m.a,{className:"d-flex",children:Object(s.jsxs)(O.a,{lg:"12",className:"d-flex justify-content-between",children:[Object(s.jsx)("button",{className:"btn btn-outline-info ml-lg-3",disabled:a,onClick:i,children:"My Threads"}),Object(s.jsx)("button",{className:"btn btn-outline-info mr-0",disabled:!a,onClick:i,children:"Modify User"})]})}),Object(s.jsx)("hr",{className:"ml-lg-3"}),Object(s.jsx)("div",{className:"ml-lg-3 mt-3",children:a?Object(s.jsx)("div",{children:Object(s.jsx)(V,{})}):Object(s.jsx)("div",{children:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(m.a,{className:"d-flex flex-column",children:[Object(s.jsx)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:Object(s.jsxs)(k.a,{onSubmit:te,className:"d-flex",children:[Object(s.jsxs)(C.a,{children:[Object(s.jsx)(q.a,{type:"username",name:"username",id:"username",placeholder:"Search user",className:"border border-secondary",style:{height:"32px"},value:N,onChange:function(e){return v(e.target.value)},required:!0}),Object(s.jsx)(W.a,{valid:!0,children:"Username is not correct!"})]}),Object(s.jsx)("button",{className:"btn btn-outline-secondary py-0",style:{height:"32px",width:"120px"},children:"Search"})]})}),Object(s.jsxs)("div",{style:{fontSize:"14px"},children:[Object(s.jsx)("p",{className:"ml-3",children:"Searh user by username or role. "}),Object(s.jsx)("p",{className:"ml-3",style:{marginTop:"-15px"},children:"To modify a user, click on the username."})]})]}),T&&T.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsx)("hr",{}),Object(s.jsx)(m.a,{className:"pt-2 found_user",style:{cursor:"pointer"},onClick:function(){return se(e._id,e.username,e.role)},children:Object(s.jsxs)(O.a,{xs:"9",sm:"8",children:[Object(s.jsx)("h4",{className:"text-secondary mt-1 pb-0",children:e.username}),Object(s.jsxs)("p",{className:"text-primary mt-0 pt-0",children:["role: ",e.role]})]})})]},"sub"+e._id+t)})),Object(s.jsx)("hr",{}),B&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"bg-success pt-2 pl-0 ml-0 mb-3 pb-0",style:{height:"40px",hover:{color:"white"}},children:Object(s.jsx)("h5",{className:"pl-2 text-light pb-0",children:"Modify User"})}),Object(s.jsxs)(m.a,{className:"pl-1",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"12",lg:"6",children:[Object(s.jsx)("h5",{children:"Username"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{className:"text-info mt-2 p-0",children:B}),Object(s.jsxs)("p",{className:"text-success mt-0 pt-0",children:["Present Role: ",G]})]}),Object(s.jsx)("button",{className:"btn btn-outline-danger mt-3",onClick:function(){return ce(M)},style:{height:"30px",width:"150px",fontSize:"16px",paddingTop:"2px"},children:"Delete User"})]}),Object(s.jsx)(O.a,{xs:"12",sm:"12",lg:"6",children:Object(s.jsxs)(k.a,{onSubmit:ne,children:[Object(s.jsx)("h5",{className:"py-0",children:"Set role"}),Object(s.jsxs)("div",{className:"form-check",children:[Object(s.jsx)("input",{type:"radio",className:"mt-2",value:"admin",checked:"admin"===F,onChange:function(e){return D(e.target.value)}}),Object(s.jsx)("label",{className:"form-check-label pl-2",children:"admin"})]}),Object(s.jsxs)("div",{className:"form-check",children:[Object(s.jsx)("input",{type:"radio",className:"mt-2",value:"moderator",checked:"moderator"===F,onChange:function(e){return D(e.target.value)}}),Object(s.jsx)("label",{className:"form-check-label pl-2",children:"moderator"})]}),Object(s.jsxs)("div",{className:"form-check",children:[Object(s.jsx)("input",{type:"radio",className:"mt-2",value:"general",checked:"general"===F,onChange:function(e){return D(e.target.value)}}),Object(s.jsx)("label",{className:"form-check-label pl-2 mt-0",children:"general"})]}),Object(s.jsx)("button",{className:"btn btn-outline-success my-3",style:{height:"30px",width:"150px",fontSize:"16px",paddingTop:"2px"},children:"Set Role"})]})})]}),Object(s.jsx)("hr",{style:{height:"23px"}})]}),Z&&Object(s.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:Z})]})})})]})]})]})},X=function(){var e=Object(n.useContext)(S).user;return Object(s.jsxs)(p.a,{className:"border border-warning pb-5",style:{minHeight:"80vh"},children:[Object(s.jsx)(m.a,{className:"d-flex flex-column",children:Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(s.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(s.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(s.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(s.jsx)("hr",{}),Object(s.jsxs)(m.a,{className:"mx-auto",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)("h4",{className:"ml-0",children:"Create a thread"}),Object(s.jsx)("hr",{className:"ml-1"}),Object(s.jsx)(K,{})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)("h4",{className:"ml-lg-3 mt-xs-5",children:"My threads"}),Object(s.jsx)("hr",{className:"ml-lg-3"}),Object(s.jsx)("div",{className:"ml-lg-3 mt-4",children:Object(s.jsx)(V,{})})]})]})]})},Z=function(){var e=Object(n.useContext)(S).user;return Object(s.jsxs)(p.a,{className:"border border-warning pb-5",style:{minHeight:"80vh"},children:[Object(s.jsx)(m.a,{className:"d-flex flex-column",children:Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(s.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(s.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(s.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(s.jsx)("hr",{}),Object(s.jsxs)(m.a,{className:"mx-auto",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)("h4",{className:"ml-0",children:"Create a thread"}),Object(s.jsx)("hr",{className:"ml-1"}),Object(s.jsx)(K,{})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)("h4",{className:"ml-lg-3 mt-xs-5",children:"My threads"}),Object(s.jsx)("hr",{className:"ml-lg-3"}),Object(s.jsx)("div",{className:"ml-lg-3 mt-4",children:Object(s.jsx)(V,{})})]})]})]})},ee=function(){var e=Object(n.useContext)(S).user;return Object(s.jsx)(s.Fragment,{children:null!==e&&"admin"===e.role?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Q,{})}):null!==e&&"moderator"===e.role?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(X,{})}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Z,{})})})},te=c(33),ce=c(56),se=function(e){var t=e.component,c=Object(ce.a)(e,["component"]),a=Object(n.useContext)(S).user;return Object(s.jsx)(j.b,Object(te.a)(Object(te.a)({},c),{},{render:function(e){return a?Object(s.jsx)(t,Object(te.a)(Object(te.a)({},c),e)):Object(s.jsx)(j.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ne=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(w,{children:Object(s.jsx)(x,{children:Object(s.jsxs)(l.a,{children:[Object(s.jsx)(A,{}),Object(s.jsx)("div",{className:"content",children:Object(s.jsxs)(j.d,{children:[Object(s.jsx)(se,{exact:!0,path:"/mypage",component:ee}),Object(s.jsx)(j.b,{exact:!0,path:"/",component:N}),Object(s.jsx)(j.b,{exact:!0,path:"/register",component:J}),Object(s.jsx)(j.b,{exact:!0,path:"/signin",component:G}),Object(s.jsx)(j.b,{exact:!0,path:"/about",component:Y}),Object(s.jsx)(j.b,{exact:!0,path:"/:id",component:y}),Object(s.jsx)(j.b,{exact:!0,path:"/:id1/:id2",component:I})]})}),Object(s.jsx)(H,{})]})})})})};c(77);i.a.render(Object(s.jsx)(a.a.Fragment,{children:Object(s.jsx)(ne,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.1ee06b28.chunk.js.map