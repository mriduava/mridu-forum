(this.webpackJsonpmriduforum=this.webpackJsonpmriduforum||[]).push([[0],{60:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var s=c(3),n=c.n(s),a=c(29),r=c.n(a),i=(c(60),c(12)),l=c(13),j=c(10),o=c(5),b=c(7),d=c.n(b),u=c(0),x=Object(s.createContext)(),h=function(e){var t=Object(s.useState)(),c=Object(o.a)(t,2),n=c[0],a=c[1],r=Object(s.useState)(),i=Object(o.a)(r,2),l=i[0],b=i[1],h=Object(s.useState)(),m=Object(o.a)(h,2),O=m[0],p=m[1],f=Object(s.useState)(),g=Object(o.a)(f,2),N=g[0],y=g[1],v=Object(s.useState)(),S=Object(o.a)(v,2),w=S[0],k=S[1],C=Object(s.useState)(),T=Object(o.a)(C,2),U=T[0],E=T[1],I=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,a(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(j.a)(d.a.mark((function e(t,c){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums/".concat(t));case 2:return s=e.sent,e.next=5,s.json();case 5:s=e.sent,b(s.threads),y(t),E(c);case 9:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(d.a.mark((function e(t,c){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums/".concat(t,"/").concat(c));case 2:return s=e.sent,e.next=5,s.json();case 5:s=e.sent,p(s),k(c);case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){I()}),[]);var P={fetchFroums:I,subjects:n,fetchFroumById:F,threads:l,fetchThreadById:D,thread:O,subjectId:N,subjectName:U,threadId:w};return Object(u.jsx)(x.Provider,{value:P,children:e.children})},m=c(81),O=c(82),p=c(83),f=c.p+"static/media/waves.3e7f877a.png",g=function(e){return Object(u.jsx)("div",{className:"jumbotron mb-2 text-center",style:{backgroundImage:"url(".concat(f,")"),backgroundSize:"cover"},children:Object(u.jsxs)("p",{className:"home-text",children:["Storms don't ",Object(u.jsx)("br",{})," last forever"]})})},N=c(17),y=function(){var e=Object(s.useContext)(x),t=e.subjects,c=e.fetchFroumById,n=Object(N.useSpring)({to:{opacity:1},from:{opacity:0}});return Object(u.jsxs)("div",{children:[Object(u.jsx)(p.a,{fluid:!0,className:"px-0",children:Object(u.jsx)(m.a,{className:"mx-0 px-0 jumbotron-area",children:Object(u.jsx)(O.a,{lg:"12",className:"px-0",children:Object(u.jsx)(g,{})})})}),Object(u.jsx)(p.a,{className:"mx-auto px-0",children:Object(u.jsx)(m.a,{className:"foram-area",children:Object(u.jsxs)(O.a,{lg:"12",children:[Object(u.jsxs)(m.a,{className:"text-white border border-rounded pt-2 mb-1 forum-bar",style:{margin:"0 0.5px 0 0.5px",borderRadius:"5px"},children:[Object(u.jsx)(O.a,{xs:"12",sm:"8",children:Object(u.jsx)("h4",{className:"pl-2",children:"Forums"})}),Object(u.jsx)(O.a,{sm:"4",className:"text-right d-none d-md-block d-sm-block d-lg-block",children:Object(u.jsx)("h4",{children:"Threads"})})]}),t&&t.map((function(e,t){return Object(u.jsxs)(N.animated.div,{style:n,children:[Object(u.jsxs)(m.a,{className:"mx-0",children:[Object(u.jsx)(O.a,{xs:"12",sm:"8",children:Object(u.jsxs)(i.b,{to:"/".concat(e.subject),style:{textDecoration:"none"},onClick:function(){return c(e._id,e.subject)},children:[Object(u.jsx)("h2",{className:"text-secondary mt-1 px-2",children:e.subject}),Object(u.jsx)("p",{className:"text-dark text-justify px-2",children:e.description})]})}),Object(u.jsx)(O.a,{sm:"4",className:"mt-5 text-right d-none d-sm-block d-md-block d-lg-block pr-4",children:Object(u.jsx)("h5",{children:e.threads.length})})]}),Object(u.jsx)("hr",{})]},"sub"+e._id+t)}))]})})})]})},v=function(){var e=Object(s.useContext)(x),t=e.threads,c=e.subjectId,n=e.subjectName,a=e.fetchThreadById,r=Object(N.useSpring)({to:{opacity:1},from:{opacity:0}});return Object(u.jsxs)(p.a,{className:"themed-container",children:[Object(u.jsxs)(m.a,{className:"text-light pt-2 mb-1 thread-bar",children:[Object(u.jsx)(O.a,{xs:"9",sm:"8",children:Object(u.jsxs)("h5",{children:[Object(u.jsx)(i.b,{to:"/",style:{textDecoration:"none"},children:Object(u.jsx)("span",{className:"subject-name",children:" Home "})}),"\xbb ",n]})}),Object(u.jsx)(O.a,{xs:"3",sm:"4",className:"text-lg-right d-none d-lg-block",children:Object(u.jsx)("h5",{children:"Answers"})})]}),Object(u.jsx)(N.animated.div,{style:r,children:t&&t.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsxs)(m.a,{children:[Object(u.jsx)(O.a,{xs:"9",sm:"8",children:Object(u.jsxs)(i.b,{to:"/".concat(n,"/").concat(e.topic),style:{textDecoration:"none"},onClick:function(){return a(c,e._id)},children:[Object(u.jsx)("h5",{className:"text-secondary mt-1 pb-0",children:e.topic}),Object(u.jsxs)("p",{className:"text-primary mt-0 pt-0",children:["Writer: ",e.author.username.toUpperCase()]})]})}),Object(u.jsx)(O.a,{xs:"3",sm:"4",className:"text-right mt-2 d-none d-lg-block",children:e.posts.length})]}),Object(u.jsx)("hr",{className:"mt-1"})]},"sub"+e._id+t)}))})]})},S=Object(s.createContext)(),w=function(e){var t=Object(s.useState)(null),c=Object(o.a)(t,2),n=c[0],a=c[1];Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("token"));e&&a(e)}),[]);var r={user:n,setUser:a};return Object(u.jsx)(S.Provider,{value:r,children:e.children})},k=c(84),C=c(85),T=c(86),U=c(53),E=c.n(U),I=function(){var e=Object(s.useContext)(x),t=e.subjectName,c=e.thread,n=e.subjectId,a=e.threadId,r=e.fetchThreadById,l=Object(s.useContext)(S).user,b=Object(s.useState)(""),h=Object(o.a)(b,2),f=h[0],g=h[1],y=Object(s.useState)(!1),v=Object(o.a)(y,2),w=v[0],U=v[1],I=Object(s.useState)(!1),F=Object(o.a)(I,2),D=F[0],P=F[1],R=Object(s.useState)(""),M=Object(o.a)(R,2),A=M[0],L=M[1],z=Object(N.useSpring)({to:{opacity:1},from:{opacity:0}}),B=function(e){return E()(e).format("YYYY-MM-DD, H:mm")},_=function(){return U(!w)},q=function(){return P(!D)},J=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(n,"/").concat(a),{method:"PUT",body:JSON.stringify({topic:c.topic,text:A}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&(r(n,a),L(""),q())}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums/".concat(n,"/").concat(a),{method:"DELETE"}).then((function(e){e.ok&&z.history.push("/")})).catch((function(e){return Promise.reject()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(n,"/").concat(a),{method:"POST",body:JSON.stringify({text:f}),headers:{"Content-Type":"application/json"}}).then((function(e){g(""),_(),r(n,a)})).catch((function(e){return Promise.reject()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(p.a,{className:"themed-container",children:[Object(u.jsx)(N.animated.div,{style:z,children:c&&Object(u.jsxs)("div",{children:[Object(u.jsxs)(m.a,{className:"text-light pt-2 thread-bar",children:[Object(u.jsx)(O.a,{xs:"12",sm:"12",md:"8",children:Object(u.jsxs)("h5",{children:[Object(u.jsx)(i.b,{to:"/",style:{textDecoration:"none"},children:Object(u.jsx)("span",{className:"subject-name",children:" Home "})}),"\xbb",Object(u.jsx)(i.b,{to:"/".concat(t),style:{textDecoration:"none"},children:Object(u.jsxs)("span",{className:"subject-name",children:[" ",t," "]})}),"\xbb ",c.topic]})}),Object(u.jsx)(O.a,{xs:"0",sm:"0",md:"4",className:"text-lg-right d-none d-lg-block",children:Object(u.jsxs)("h5",{children:[c.posts.length," Comments"]})})]}),Object(u.jsxs)(m.a,{className:"mt-3",children:[Object(u.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(u.jsx)("p",{className:"mb-0 text-danger",children:"Writer"}),Object(u.jsx)("h4",{className:"text-secondary pb-2",children:c.author.username.toUpperCase()})]}),Object(u.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(u.jsx)("p",{className:"mb-0",children:B(c.created)}),Object(u.jsx)("p",{className:"text-dark mt-1 text-justify",style:{whiteSpace:"pre-wrap"},children:c.text}),function(){if(null!==l)return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("hr",{className:"p-0 m-0"}),Object(u.jsx)("button",{className:"btn btn-outline-success mt-3 mr-2",onClick:function(){return _()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Reply"})]})}(),function(){if(null!==l&&(l.id===c.author.id||"admin"===l.role||"moderator"===l.role))return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"btn btn-outline-primary mt-3 mr-2",onClick:function(){return q()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Edit"}),Object(u.jsx)("button",{className:"btn btn-outline-danger mt-3",onClick:function(){return W()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Delete"})]})}()]})]}),Object(u.jsx)("hr",{}),Object(u.jsx)(T.a,{in:w,tag:"h5",className:"mt-3",children:w&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(m.a,{children:[Object(u.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(u.jsx)("h5",{className:"text-secondary",children:l.username.toUpperCase()}),Object(u.jsx)("p",{className:"pb-2 text-warning",children:"is going to reply"})]}),Object(u.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(u.jsxs)(k.a,{onSubmit:G,children:[Object(u.jsx)(C.a,{children:Object(u.jsx)("textarea",{name:"text",id:"text",placeholder:"Write your comment here...",className:"form-control",pattern:".{100, 5000}",required:!0,minLength:"100",value:f,onChange:function(e){return g(e.target.value)}})}),Object(u.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"162px",fontSize:"13px",paddingTop:"2px"},children:"Submit Comment"})]}),Object(u.jsx)("button",{className:"btn btn-outline-danger mt-0",onClick:function(){return _()},style:{position:"relative",left:170,top:-25,height:"26px",width:"120px",fontSize:"13px",paddingTop:"2px"},children:"Cancel"})]})]}),Object(u.jsx)("hr",{})]})}),Object(u.jsx)(T.a,{in:D,tag:"h5",className:"mt-3",children:D&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(m.a,{children:[Object(u.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(u.jsx)("h5",{className:"text-secondary",children:l.username.toUpperCase()}),Object(u.jsx)("p",{className:"pb-2 text-warning",children:"is going to modify"})]}),Object(u.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(u.jsxs)(k.a,{onSubmit:J,children:[Object(u.jsx)(C.a,{children:Object(u.jsx)("textarea",{name:"text",id:"text",placeholder:"Write your comment here...",className:"form-control",pattern:".{20, 5000}",required:!0,minLength:"20",defaultValue:c.text,onChange:function(e){return L(e.target.value)}})}),Object(u.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"162px",fontSize:"13px",paddingTop:"2px"},children:"Submit Updated Text"})]}),Object(u.jsx)("button",{className:"btn btn-outline-danger mt-0",onClick:function(){return q()},style:{position:"relative",left:170,top:-25,height:"26px",width:"120px",fontSize:"13px",paddingTop:"2px"},children:"Cancel"})]})]}),Object(u.jsx)("hr",{})]})})]},"sub"+c._id)}),Object(u.jsx)(N.animated.div,{style:z,children:c&&c.posts.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsxs)(m.a,{children:[Object(u.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(u.jsx)("p",{className:"mb-0 text-success",children:"Replied by"}),Object(u.jsx)("h5",{className:"text-secondary pb-2",children:e.author.username.toUpperCase()})]}),Object(u.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(u.jsx)("p",{className:"mb-0",children:B(e.created)}),Object(u.jsx)("p",{className:"text-secondary mt-1 text-justify",children:e.text})]})]}),Object(u.jsx)("hr",{})]},"pos"+e._id)}))})]})},F=c(87),D=c(88),P=c(89),R=c(90),M=c(91),A=function(e){var t=Object(s.useState)(!1),c=Object(o.a)(t,2),n=c[0],a=c[1],r=Object(s.useContext)(S),l=r.user,b=r.setUser,x=Object(s.useState)(!1),h=Object(o.a)(x,2),m=h[0],O=h[1],f=function(){var e=window.scrollY;O(e>200)};Object(s.useEffect)((function(){window.addEventListener("scroll",f)}),[]),Object(s.useEffect)((function(){m?document.getElementById("sticky").classList.add("sticky-top"):document.getElementById("sticky").classList.remove("sticky-top")}),[m]);var g=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/logout");case 2:b(null),localStorage.removeItem("token");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"navbar px-0 py-0",id:"sticky",children:Object(u.jsx)(p.a,{className:"px-lg-0",children:Object(u.jsxs)(F.a,{light:!0,expand:"md",className:"px-0",children:[Object(u.jsx)(i.b,{to:"/",className:"navbar-brand text-datk font-weight-bold",children:Object(u.jsx)("h3",{children:"MRIDU FORUM"})}),Object(u.jsx)(D.a,{onClick:function(){return a(!n)}}),Object(u.jsx)(P.a,{isOpen:n,navbar:!0,children:Object(u.jsxs)(R.a,{className:"ml-auto mt-2 right-nav",navbar:!0,children:[Object(u.jsx)(M.a,{children:Object(u.jsx)(i.b,{to:"/about",children:Object(u.jsx)("h5",{className:"text-dark mr-lg-4",children:"ABOUT"})})}),l?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M.a,{children:Object(u.jsx)(i.b,{to:"/mypage",children:Object(u.jsx)("h5",{className:"text-dark mr-lg-4",children:"MY PAGE"})})}),Object(u.jsx)(M.a,{children:Object(u.jsx)(i.b,{onClick:g,to:"/",children:Object(u.jsx)("h5",{className:"text-dark",children:"LOGOUT"})})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(M.a,{children:Object(u.jsx)(i.b,{to:"/register",children:Object(u.jsx)("h5",{className:"text-dark mr-lg-4",children:"REGISTER"})})}),Object(u.jsx)(M.a,{children:Object(u.jsx)(i.b,{to:"/signin",children:Object(u.jsx)("h5",{className:"text-dark",children:"SIGN IN"})})})]})]})})]})})})},L=c(28),z=c(37),B=c(54);L.b.add(B.a);var _=function(){return Object(u.jsxs)("div",{className:"footer",children:[Object(u.jsx)(p.a,{className:"bottom footer-bar",fluid:!0,children:Object(u.jsx)(m.a,{children:Object(u.jsx)(O.a,{lg:"12",className:"px-0",children:Object(u.jsx)("div",{className:"footer-bar"})})})}),Object(u.jsx)("div",{className:"footer-top",children:Object(u.jsx)(p.a,{className:"px-lg-0",children:Object(u.jsxs)(m.a,{className:"",children:[Object(u.jsxs)(O.a,{lg:"4",className:"pt-3",children:[Object(u.jsx)("p",{className:"mb-0 font-weight-bold text-priamry",children:"CONTACT"}),Object(u.jsx)("hr",{className:"my-0 bg-secondary"}),Object(u.jsx)("p",{className:"mb-0",children:Object(u.jsx)("span",{className:"text-white",children:"MARUF AHMED"})}),Object(u.jsxs)("p",{className:"mb-0 ",children:[Object(u.jsx)("span",{className:"text-white",children:"Email: "}),Object(u.jsx)("span",{className:"text-white",children:"maruf.ahmed@live.se"})]}),Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{className:"text-white",children:"GitHub :"}),Object(u.jsx)("span",{className:"text-white",children:" github.com/mriduava/mridu-forum"})]})]}),Object(u.jsxs)(O.a,{lg:"4",className:"pt-3 text-lg-center",children:[Object(u.jsx)("p",{className:"mb-0 font-weight-bold text-priamry",children:"MEDIA ICONS"}),Object(u.jsx)("hr",{className:"my-0 bg-secondary"}),Object(u.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(u.jsx)("h4",{className:"mt-3 mr-1",children:Object(u.jsx)("span",{className:"text-white",children:Object(u.jsx)(z.a,{icon:["fab","linkedin"]})})}),Object(u.jsx)("h4",{className:"mt-3 mx-1",children:Object(u.jsx)("span",{className:"text-white",children:Object(u.jsx)(z.a,{icon:["fab","facebook"]})})}),Object(u.jsx)("h4",{className:"mt-3 mx-1",children:Object(u.jsx)("span",{className:"text-white",children:Object(u.jsx)(z.a,{icon:["fab","github"]})})})]})]}),Object(u.jsxs)(O.a,{lg:"4",className:"text-lg-right pt-3",children:[Object(u.jsx)("p",{className:"mb-0 font-weight-bold text-priamry",children:"USEFUL LINK"}),Object(u.jsx)("hr",{className:"my-0 bg-secondary"}),Object(u.jsx)(i.b,{className:"text-dark",to:"/signin",children:Object(u.jsx)("p",{className:"mb-0",children:Object(u.jsx)("span",{className:"text-white",children:"SIGN IN"})})}),Object(u.jsx)(i.b,{className:"text-dark",to:"/register",children:Object(u.jsx)("p",{className:"mb-0",children:Object(u.jsx)("span",{className:"text-white",children:"REGISTER"})})}),Object(u.jsx)(i.b,{className:"text-dark",to:"/about",children:Object(u.jsx)("p",{className:"mb-0",children:Object(u.jsx)("span",{className:"text-white",children:"ABOUT"})})})]})]})})}),Object(u.jsx)(p.a,{fluid:!0,children:Object(u.jsx)(m.a,{children:Object(u.jsx)(O.a,{lg:"12",className:"footer-bottom",children:Object(u.jsx)("div",{style:{height:"30px"},children:Object(u.jsx)("p",{className:"mb-0",children:"\xa9 2021 MARUF AHMED"})})})})})]})},q=c(92),J=c(93),W=function(e){var t=Object(s.useContext)(S).setUser,c=Object(s.useState)(""),n=Object(o.a)(c,2),a=n[0],r=n[1],i=Object(s.useState)(""),l=Object(o.a)(i,2),b=l[0],x=l[1],h=Object(s.useState)(""),f=Object(o.a)(h,2),g=f[0],N=f[1],y=function(e,t){return!!(new RegExp("^[_A-z0-9]{1,}$").test(e)&&e.length>=t)},v=function(){var c=Object(j.a)(d.a.mark((function c(s){var n;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(s.preventDefault(),y(a,3)){c.next=4;break}return N("Username must be at least 3 characters without space!"),c.abrupt("return");case 4:if(y(b,6)){c.next=7;break}return N("Password must be at least 6 characters without space!"),c.abrupt("return");case 7:return n={username:a,password:b},c.next=10,fetch("/register",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(c){c.ok?(c=c.json(),Promise.resolve(c).then((function(e){return t(e)})),e.history.push("/signin")):N("Username is used!")})).catch((function(e){return Promise.reject()}));case 10:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(u.jsx)(p.a,{className:"border border-secondary pb-5 register-area",children:Object(u.jsx)(m.a,{children:Object(u.jsxs)(O.a,{xs:"12",sm:"8",md:"6",lg:"5",className:"mx-auto m-5 border border-rounded p-5",children:[Object(u.jsx)("h4",{className:"text-dark font-weight-bold",children:"Registration"}),Object(u.jsx)("hr",{}),Object(u.jsxs)(k.a,{onSubmit:v,children:[Object(u.jsxs)(C.a,{children:[Object(u.jsx)(q.a,{for:"username",children:"Username"}),Object(u.jsx)(J.a,{type:"username",name:"username",id:"username",value:a,onChange:function(e){return r(e.target.value)},required:!0})]}),Object(u.jsxs)(C.a,{children:[Object(u.jsx)(q.a,{for:"password",children:"Password"}),Object(u.jsx)(J.a,{type:"password",name:"password",id:"password",value:b,onChange:function(e){return x(e.target.value)},required:!0})]}),Object(u.jsx)("button",{className:"btn btn-block btn-outline-success mt-4",children:"SUBMIT"}),Object(u.jsx)("div",{className:"pt-2 text-danger",children:g})]})]})})})},G=c(94),H=function(e){var t=Object(s.useContext)(S).setUser,c=Object(s.useState)(""),n=Object(o.a)(c,2),a=n[0],r=n[1],i=Object(s.useState)(""),l=Object(o.a)(i,2),b=l[0],x=l[1],h=Object(s.useState)(""),f=Object(o.a)(h,2),g=f[0],N=f[1],y=function(){var c=Object(j.a)(d.a.mark((function c(s){var n;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),n={username:a,password:b},c.next=4,fetch("/login",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(c){c.ok?(c=c.json(),Promise.resolve(c).then((function(c){t(c),localStorage.setItem("token",JSON.stringify(c)),e.history.push("/mypage")}))):N("Username or Password incorrect!")})).catch((function(e){return Promise.reject()}));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(u.jsx)(p.a,{className:"border border-secondary pb-5",children:Object(u.jsx)(m.a,{children:Object(u.jsxs)(O.a,{xs:"12",sm:"8",md:"6",lg:"5",className:"mx-auto m-5 border border-rounded p-5",children:[Object(u.jsx)("h4",{className:"text-dark font-weight-bold",children:"Sign in"}),Object(u.jsx)("hr",{}),Object(u.jsxs)(k.a,{onSubmit:y,children:[Object(u.jsxs)(C.a,{children:[Object(u.jsx)(q.a,{for:"username",children:"Username"}),Object(u.jsx)(J.a,{type:"username",name:"username",id:"username",value:a,onChange:function(e){return r(e.target.value)},required:!0}),Object(u.jsx)(G.a,{valid:!0,children:"Username is not correct!"})]}),Object(u.jsxs)(C.a,{children:[Object(u.jsx)(q.a,{for:"password",children:"Password"}),Object(u.jsx)(J.a,{type:"password",name:"password",id:"password",value:b,onChange:function(e){return x(e.target.value)},required:!0}),Object(u.jsx)(G.a,{children:"Wrong password!"})]}),Object(u.jsx)("button",{className:"btn btn-block btn-outline-success mt-4",children:"SUBMIT"}),Object(u.jsx)("div",{className:"pt-2 text-danger",children:g})]})]})})})},Y=function(){var e=Object(N.useSpring)({to:{opacity:1},from:{opacity:0}});return Object(u.jsx)(p.a,{style:{textAlign:"center"},className:"border border-secondary pb-5",children:Object(u.jsx)(N.animated.div,{style:e,children:Object(u.jsx)("h1",{style:{marginTop:"10%"},children:"THIS IS A DEMO WEB SITE"})})})},K=function(){var e=Object(s.useContext)(x).subjects,t=Object(s.useState)(""),c=Object(o.a)(t,2),n=c[0],a=c[1],r=Object(s.useState)(""),i=Object(o.a)(r,2),l=i[0],b=i[1],h=Object(s.useState)(""),m=Object(o.a)(h,2),O=m[0],p=m[1],f=Object(s.useState)(""),g=Object(o.a)(f,2),N=g[0],y=g[1];Object(s.useEffect)((function(){var e=setTimeout((function(){null!==N&&y(null)}),3e3);return function(){return clearTimeout(e)}}),[N]);var v=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(n),{method:"POST",body:JSON.stringify({topic:l,text:O}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){e.ok?(y("Thread submission successful!"),a(""),b(""),p("")):y("Thread submission failed!")})).catch((function(e){return Promise.reject()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(k.a,{className:"mt-3 mb-4",onSubmit:v,children:[Object(u.jsx)(C.a,{children:e&&Object(u.jsxs)(J.a,{type:"select",name:"select",id:"exampleSelect",required:!0,onChange:function(e){return a(e.target.value)},children:[Object(u.jsx)("option",{value:"",children:"Select a Sub-Forum"}),e.map((function(e,t){return Object(u.jsx)("option",{value:e._id,children:e.subject},"sub"+e._id+t)}))]})}),Object(u.jsx)(C.a,{children:Object(u.jsx)(J.a,{type:"text",name:"topic",id:"topic",placeholder:"Write a title...",minLength:"6",value:l,onChange:function(e){return b(e.target.value)},required:!0})}),Object(u.jsx)(C.a,{children:Object(u.jsx)(J.a,{type:"textarea",name:"text",id:"text",placeholder:"Write in detail...",minLength:"15",value:O,onChange:function(e){return p(e.target.value)},required:!0})}),Object(u.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"190px",fontSize:"13px",paddingTop:"2px"},children:"Submit Thread"})]}),N&&Object(u.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:N}),Object(u.jsx)("hr",{})]})},V=function(){var e=Object(s.useContext)(S).user,t=Object(s.useState)([]),c=Object(o.a)(t,2),n=c[0],a=c[1],r=Object(N.useSpring)({to:{opacity:1},from:{opacity:0}});Object(s.useEffect)((function(){var t=function(){var t=Object(j.a)(d.a.mark((function t(){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/search/mythreads?username=".concat(e.username));case 2:return c=t.sent,t.next=5,c.json();case 5:c=t.sent,a(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.username]);return Object(u.jsx)(m.a,{children:Object(u.jsx)(O.a,{lg:"12",children:Object(u.jsx)(N.animated.div,{className:"my-threads",style:r,children:n&&n.map((function(e,t){return Object(u.jsx)("ul",{children:Object(u.jsxs)("li",{children:[t+1,".",Object(u.jsxs)("span",{children:[" ",e.topic]})]})},"sub"+e._id+t)}))})})})},$=function(){var e=Object(s.useContext)(x).fetchFroums,t=Object(s.useState)(""),c=Object(o.a)(t,2),n=c[0],a=c[1],r=Object(s.useState)(""),i=Object(o.a)(r,2),l=i[0],b=i[1],h=Object(s.useState)(),m=Object(o.a)(h,2),O=m[0],p=m[1];Object(s.useEffect)((function(){var e=setTimeout((function(){null!==O&&p(null)}),3e3);return function(){return clearTimeout(e)}}),[O]);var f=function(){var t=Object(j.a)(d.a.mark((function t(c){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,fetch("/api/forums/",{method:"POST",body:JSON.stringify({subject:n,description:l}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){e(),t.ok?(p("Sub-Forum submission successful!"),a(""),b("")):p("Sub-Forum submission failed!")})).catch((function(e){return Promise.reject()}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(k.a,{className:"mt-3 mb-4",onSubmit:f,children:[Object(u.jsx)(C.a,{children:Object(u.jsx)(J.a,{type:"select",name:"select",id:"exampleSelect",disabled:!0,children:Object(u.jsx)("option",{value:"",disabled:!0,children:"Select a Sub-Forum"})})}),Object(u.jsx)(C.a,{children:Object(u.jsx)(J.a,{type:"text",name:"topic",id:"topic",placeholder:"Write a forum subject..",value:n,onChange:function(e){return a(e.target.value)},required:!0})}),Object(u.jsx)(C.a,{children:Object(u.jsx)(J.a,{type:"textarea",name:"text",id:"text",placeholder:"Write forum description...",value:l,onChange:function(e){return b(e.target.value)},required:!0})}),Object(u.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"190px",fontSize:"13px",paddingTop:"2px"},children:"Submit Sub-Forum"})]}),O&&Object(u.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:O}),Object(u.jsx)("hr",{})]})},Q=function(){var e=Object(s.useContext)(S).user,t=Object(s.useState)(!0),c=Object(o.a)(t,2),n=c[0],a=c[1],r=function(){return a(!n)},i=Object(s.useState)(!0),l=Object(o.a)(i,2),b=l[0],x=l[1],h=function(){return x(!b)},f=Object(s.useState)(""),g=Object(o.a)(f,2),N=g[0],y=g[1],v=Object(s.useState)(null),w=Object(o.a)(v,2),T=w[0],U=w[1],E=Object(s.useState)(""),I=Object(o.a)(E,2),F=I[0],D=I[1],P=Object(s.useState)(null),R=Object(o.a)(P,2),M=R[0],A=R[1],L=Object(s.useState)(null),z=Object(o.a)(L,2),B=z[0],_=z[1],q=Object(s.useState)(null),W=Object(o.a)(q,2),H=W[0],Y=W[1],Q=Object(s.useState)(null),X=Object(o.a)(Q,2),Z=X[0],ee=X[1],te=function(){var e=Object(j.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/search/user?username=".concat(N,"&role=").concat(N));case 3:return c=e.sent,e.next=6,c.json();case 6:c=e.sent,U(c),y("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/".concat(t),{method:"DELETE"}).then((function(e){e.ok&&(_(null),ee("The user has been deleted!"))})).catch((function(e){return Promise.reject()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e,t,c){A(e),_(t),Y(c),U(null),D(c)},ne=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/users?username=".concat(B),{method:"PUT",body:JSON.stringify({role:F}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?(_(null),ee("Role setting successful!")):ee("Role setting failed!")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){var e=setTimeout((function(){null!==Z&&ee(null)}),3e3);return function(){return clearTimeout(e)}}),[Z]);return Object(u.jsxs)(p.a,{className:"border border-info pb-5",children:[Object(u.jsx)(m.a,{className:"d-flex flex-column",children:Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(u.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(u.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(u.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(u.jsx)("hr",{}),Object(u.jsxs)(m.a,{className:"mx-auto",children:[Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(u.jsx)(m.a,{className:"d-flex",children:Object(u.jsxs)(O.a,{lg:"12",className:"d-flex justify-content-between",children:[Object(u.jsx)("button",{className:"btn btn-outline-primary m-0",disabled:b,onClick:h,children:"Create a Thread"}),Object(u.jsx)("button",{className:"btn btn-outline-primary align-self-end ",disabled:!b,onClick:h,children:"Create a Sub-Forum"})]})}),Object(u.jsx)("hr",{className:"ml-1"}),b?Object(u.jsx)(K,{}):Object(u.jsx)($,{})]}),Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(u.jsx)(m.a,{className:"d-flex",children:Object(u.jsxs)(O.a,{lg:"12",className:"d-flex justify-content-between",children:[Object(u.jsx)("button",{className:"btn btn-outline-info ml-lg-3",disabled:n,onClick:r,children:"My Threads"}),Object(u.jsx)("button",{className:"btn btn-outline-info mr-0",disabled:!n,onClick:r,children:"Modify User"})]})}),Object(u.jsx)("hr",{className:"ml-lg-3"}),Object(u.jsx)("div",{className:"ml-lg-3 mt-3",children:n?Object(u.jsx)("div",{children:Object(u.jsx)(V,{})}):Object(u.jsx)("div",{children:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(m.a,{className:"d-flex flex-column",children:[Object(u.jsx)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:Object(u.jsxs)(k.a,{onSubmit:te,className:"d-flex",children:[Object(u.jsxs)(C.a,{children:[Object(u.jsx)(J.a,{type:"username",name:"username",id:"username",placeholder:"Search user",className:"border border-secondary",style:{height:"32px"},value:N,onChange:function(e){return y(e.target.value)},required:!0}),Object(u.jsx)(G.a,{valid:!0,children:"Username is not correct!"})]}),Object(u.jsx)("button",{className:"btn btn-outline-secondary py-0",style:{height:"32px",width:"120px"},children:"Search"})]})}),Object(u.jsxs)("div",{style:{fontSize:"14px"},children:[Object(u.jsx)("p",{className:"ml-3",children:"Searh user by username or role. "}),Object(u.jsx)("p",{className:"ml-3",style:{marginTop:"-15px"},children:"To modify a user, click on the username."})]})]}),T&&T.map((function(e,t){return Object(u.jsxs)("div",{children:[Object(u.jsx)("hr",{}),Object(u.jsx)(m.a,{className:"pt-2 found_user",style:{cursor:"pointer"},onClick:function(){return se(e._id,e.username,e.role)},children:Object(u.jsxs)(O.a,{xs:"9",sm:"8",children:[Object(u.jsx)("h4",{className:"text-secondary mt-1 pb-0",children:e.username}),Object(u.jsxs)("p",{className:"text-primary mt-0 pt-0",children:["role: ",e.role]})]})})]},"sub"+e._id+t)})),Object(u.jsx)("hr",{}),B&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"bg-success pt-2 pl-0 ml-0 mb-3 pb-0",style:{height:"40px",hover:{color:"white"}},children:Object(u.jsx)("h5",{className:"pl-2 text-light pb-0",children:"Modify User"})}),Object(u.jsxs)(m.a,{className:"pl-1",children:[Object(u.jsxs)(O.a,{xs:"12",sm:"12",lg:"6",children:[Object(u.jsx)("h5",{children:"Username"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"text-info mt-2 p-0",children:B}),Object(u.jsxs)("p",{className:"text-success mt-0 pt-0",children:["Present Role: ",H]})]}),Object(u.jsx)("button",{className:"btn btn-outline-danger mt-3",onClick:function(){return ce(M)},style:{height:"30px",width:"150px",fontSize:"16px",paddingTop:"2px"},children:"Delete User"})]}),Object(u.jsx)(O.a,{xs:"12",sm:"12",lg:"6",children:Object(u.jsxs)(k.a,{onSubmit:ne,children:[Object(u.jsx)("h5",{className:"py-0",children:"Set role"}),Object(u.jsxs)("div",{className:"form-check",children:[Object(u.jsx)("input",{type:"radio",className:"mt-2",value:"admin",checked:"admin"===F,onChange:function(e){return D(e.target.value)}}),Object(u.jsx)("label",{className:"form-check-label pl-2",children:"admin"})]}),Object(u.jsxs)("div",{className:"form-check",children:[Object(u.jsx)("input",{type:"radio",className:"mt-2",value:"moderator",checked:"moderator"===F,onChange:function(e){return D(e.target.value)}}),Object(u.jsx)("label",{className:"form-check-label pl-2",children:"moderator"})]}),Object(u.jsxs)("div",{className:"form-check",children:[Object(u.jsx)("input",{type:"radio",className:"mt-2",value:"general",checked:"general"===F,onChange:function(e){return D(e.target.value)}}),Object(u.jsx)("label",{className:"form-check-label pl-2 mt-0",children:"general"})]}),Object(u.jsx)("button",{className:"btn btn-outline-success my-3",style:{height:"30px",width:"150px",fontSize:"16px",paddingTop:"2px"},children:"Set Role"})]})})]}),Object(u.jsx)("hr",{style:{height:"23px"}})]}),Z&&Object(u.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:Z})]})})})]})]})]})},X=function(){var e=Object(s.useContext)(S).user;return Object(u.jsxs)(p.a,{className:"border border-info pb-5",children:[Object(u.jsx)(m.a,{className:"d-flex flex-column",children:Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(u.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(u.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(u.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(u.jsx)("hr",{}),Object(u.jsxs)(m.a,{className:"mx-auto",children:[Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(u.jsx)("h4",{className:"ml-0",children:"Create a thread"}),Object(u.jsx)("hr",{className:"ml-1"}),Object(u.jsx)(K,{})]}),Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(u.jsx)("h4",{className:"ml-lg-3 mt-xs-5",children:"My threads"}),Object(u.jsx)("hr",{className:"ml-lg-3"}),Object(u.jsx)("div",{className:"ml-lg-3 mt-4",children:Object(u.jsx)(V,{})})]})]})]})},Z=function(){var e=Object(s.useContext)(S).user;return Object(u.jsxs)(p.a,{className:"border border-info pb-5",children:[Object(u.jsx)(m.a,{className:"d-flex flex-column",children:Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(u.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(u.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(u.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(u.jsx)("hr",{}),Object(u.jsxs)(m.a,{className:"mx-auto",children:[Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(u.jsx)("h4",{className:"ml-0",children:"Create a thread"}),Object(u.jsx)("hr",{className:"ml-1"}),Object(u.jsx)(K,{})]}),Object(u.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(u.jsx)("h4",{className:"ml-lg-3 mt-xs-5",children:"My threads"}),Object(u.jsx)("hr",{className:"ml-lg-3"}),Object(u.jsx)("div",{className:"ml-lg-3 mt-4",children:Object(u.jsx)(V,{})})]})]})]})},ee=function(){var e=Object(s.useContext)(S).user;return Object(u.jsx)(u.Fragment,{children:null!==e&&"admin"===e.role?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Q,{})}):null!==e&&"moderator"===e.role?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(X,{})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(Z,{})})})},te=c(34),ce=c(55),se=["component"],ne=function(e){var t=e.component,c=Object(ce.a)(e,se),n=Object(s.useContext)(S).user;return Object(u.jsx)(l.b,Object(te.a)(Object(te.a)({},c),{},{render:function(e){return n?Object(u.jsx)(t,Object(te.a)(Object(te.a)({},c),e)):Object(u.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ae=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(w,{children:Object(u.jsx)(h,{children:Object(u.jsxs)(i.a,{children:[Object(u.jsx)(A,{}),Object(u.jsx)("div",{className:"content",children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(ne,{exact:!0,path:"/mypage",component:ee}),Object(u.jsx)(l.b,{exact:!0,path:"/",component:y}),Object(u.jsx)(l.b,{exact:!0,path:"/register",component:W}),Object(u.jsx)(l.b,{exact:!0,path:"/signin",component:H}),Object(u.jsx)(l.b,{exact:!0,path:"/about",component:Y}),Object(u.jsx)(l.b,{exact:!0,path:"/:id",component:v}),Object(u.jsx)(l.b,{exact:!0,path:"/:id1/:id2",component:I})]})}),Object(u.jsx)(_,{})]})})})})};c(79);r.a.render(Object(u.jsx)(n.a.Fragment,{children:Object(u.jsx)(ae,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.9e6b6ad8.chunk.js.map