(this.webpackJsonpmriduforum=this.webpackJsonpmriduforum||[]).push([[0],{38:function(e,t,c){},54:function(e,t,c){"use strict";c.r(t);var s=c(0),n=c(2),r=c.n(n),a=c(19),i=c.n(a),l=(c(38),c(12)),j=c(10),o=c(6),u=c.n(o),b=c(9),d=c(5),h=Object(n.createContext)(),x=function(e){var t=Object(n.useState)(),c=Object(d.a)(t,2),r=c[0],a=c[1],i=Object(n.useState)(),l=Object(d.a)(i,2),j=l[0],o=l[1],x=Object(n.useState)(),m=Object(d.a)(x,2),O=m[0],p=m[1],f=Object(n.useState)(),g=Object(d.a)(f,2),N=g[0],v=g[1],y=Object(n.useState)(),S=Object(d.a)(y,2),w=S[0],k=S[1],C=Object(n.useState)(),T=Object(d.a)(C,2),U=T[0],F=T[1],P=function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums");case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,a(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(u.a.mark((function e(t,c){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums/".concat(t));case 2:return s=e.sent,e.next=5,s.json();case 5:s=e.sent,o(s.threads),v(t),F(c);case 9:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(u.a.mark((function e(t,c){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/forums/".concat(t,"/").concat(c));case 2:return s=e.sent,e.next=5,s.json();case 5:s=e.sent,p(s),k(c);case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){P()}),[]);var D={fetchFroums:P,subjects:r,fetchFroumById:I,threads:j,fetchThreadById:E,thread:O,subjectId:N,subjectName:U,threadId:w};return Object(s.jsx)(h.Provider,{value:D,children:e.children})},m=c(55),O=c(56),p=c(57),f=c.p+"static/media/mriduava.098add45.jpg",g=function(e){return Object(s.jsxs)("div",{className:"jumbotron mb-2 text-center",style:{backgroundImage:"url(".concat(f,")"),backgroundSize:"cover"},children:[Object(s.jsx)("h1",{className:"ml-0 px-0 text-white font-weight-bold",children:"MRIDU FORUM"}),Object(s.jsx)("p",{className:"text-light",children:"An online discussion site"})]})},N=function(){var e=Object(n.useContext)(h),t=e.subjects,c=e.fetchFroumById;return Object(s.jsxs)(p.a,{className:"container mx-auto px-0",children:[Object(s.jsx)(m.a,{className:"mx-0 px-0",children:Object(s.jsx)(O.a,{lg:"12",className:"px-0",children:Object(s.jsx)(g,{})})}),Object(s.jsxs)(m.a,{className:"text-white bg-secondary border border-rounded pt-2 mb-3",style:{margin:"0 0.5px 0 0.5px",borderRadius:"5px"},children:[Object(s.jsx)(O.a,{xs:"12",sm:"8",children:Object(s.jsx)("h4",{className:"pl-2",children:"Forums"})}),Object(s.jsx)(O.a,{sm:"4",className:"text-right d-none d-md-block d-sm-block d-lg-block",children:Object(s.jsx)("h4",{children:"Threads"})})]}),t&&t.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{className:"mx-0",children:[Object(s.jsx)(O.a,{xs:"12",sm:"8",children:Object(s.jsxs)(l.b,{to:"/".concat(e.subject),style:{textDecoration:"none"},onClick:function(){return c(e._id,e.subject)},children:[Object(s.jsx)("h2",{className:"text-secondary mt-1 px-2",children:e.subject}),Object(s.jsx)("p",{className:"text-dark text-justify px-2",children:e.description})]})}),Object(s.jsx)(O.a,{sm:"4",className:"mt-5 text-right d-none d-sm-block d-md-block d-lg-block pr-4",children:Object(s.jsx)("h5",{children:e.threads.length})})]}),Object(s.jsx)("hr",{})]},"sub"+e._id+t)}))]})},v=function(){var e=Object(n.useContext)(h),t=e.threads,c=e.subjectId,r=e.subjectName,a=e.fetchThreadById;return Object(s.jsxs)(p.a,{className:"themed-container",children:[Object(s.jsxs)(m.a,{className:"text-light bg-info pt-2 mb-3",children:[Object(s.jsx)(O.a,{xs:"9",sm:"8",children:Object(s.jsx)("h5",{children:"Threads"})}),Object(s.jsx)(O.a,{xs:"3",sm:"4",className:"text-lg-right d-none d-lg-block",children:Object(s.jsx)("h5",{children:"Answers"})})]}),t&&t.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsx)(O.a,{xs:"9",sm:"8",children:Object(s.jsxs)(l.b,{to:"/".concat(r,"/").concat(e.topic),style:{textDecoration:"none"},onClick:function(){return a(c,e._id)},children:[Object(s.jsx)("h5",{className:"text-secondary mt-1 pb-0",children:e.topic}),Object(s.jsxs)("p",{className:"text-primary mt-0 pt-0",children:["Writer: ",e.author.username.toUpperCase()]})]})}),Object(s.jsx)(O.a,{xs:"3",sm:"4",className:"text-right mt-2 d-none d-lg-block",children:e.posts.length})]}),Object(s.jsx)("hr",{className:"mt-1"})]},"sub"+e._id+t)}))]})},y=Object(n.createContext)(),S=function(e){var t=Object(n.useState)(null),c=Object(d.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("token"));e&&a(e)}),[]);var i={user:r,setUser:a};return Object(s.jsx)(y.Provider,{value:i,children:e.children})},w=c(58),k=c(59),C=c(60),T=c(31),U=c.n(T),F=function(e){var t=Object(n.useContext)(h),c=t.subjectName,r=t.thread,a=t.subjectId,i=t.threadId,j=t.fetchThreadById,o=Object(n.useContext)(y).user,x=Object(n.useState)(""),f=Object(d.a)(x,2),g=f[0],N=f[1],v=Object(n.useState)(!1),S=Object(d.a)(v,2),T=S[0],F=S[1],P=Object(n.useState)(!1),I=Object(d.a)(P,2),E=I[0],D=I[1],R=Object(n.useState)(""),M=Object(d.a)(R,2),z=M[0],_=M[1],q=function(e){return U()(e).format("YYYY-MM-DD, H:mm")},A=function(){return F(!T)},J=function(){return D(!E)},L=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(a,"/").concat(i),{method:"PUT",body:JSON.stringify({topic:r.topic,text:z}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&(j(a,i),_(""),J())}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var t=Object(b.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/forums/".concat(a,"/").concat(i),{method:"DELETE"}).then((function(t){t.ok&&e.history.push("/")})).catch((function(e){return Promise.reject()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),W=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(a,"/").concat(i),{method:"POST",body:JSON.stringify({text:g}),headers:{"Content-Type":"application/json"}}).then((function(e){N(""),A(),j(a,i)})).catch((function(e){return Promise.reject()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(p.a,{className:"themed-container",children:[r&&Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{className:"text-light bg-success pt-2",children:[Object(s.jsx)(O.a,{xs:"12",sm:"12",md:"8",children:Object(s.jsxs)("h5",{children:[Object(s.jsx)(l.b,{to:"/".concat(c),style:{textDecoration:"none"},children:Object(s.jsxs)("span",{className:"subject-name",children:[c," "]})}),"\xbb ",r.topic]})}),Object(s.jsx)(O.a,{xs:"0",sm:"0",md:"4",className:"text-lg-right d-none d-lg-block",children:Object(s.jsxs)("h5",{children:[r.posts.length," Comments"]})})]}),Object(s.jsxs)(m.a,{className:"mt-3",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(s.jsx)("p",{className:"mb-0 text-danger",children:"Writer"}),Object(s.jsx)("h4",{className:"text-secondary pb-2",children:r.author.username.toUpperCase()})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(s.jsx)("p",{className:"mb-0",children:q(r.created)}),Object(s.jsx)("p",{className:"text-dark mt-1 text-justify",style:{whiteSpace:"pre-wrap"},children:r.text}),function(){if(null!==o)return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("hr",{className:"p-0 m-0"}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-3 mr-2",onClick:function(){return A()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Reply"})]})}(),function(){if(null!==o&&(o.id===r.author.id||"admin"===o.role||"moderator"===o.role))return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("button",{className:"btn btn-outline-primary mt-3 mr-2",onClick:function(){return J()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Edit"}),Object(s.jsx)("button",{className:"btn btn-outline-danger mt-3",onClick:function(){return B()},style:{height:"26px",width:"90px",fontSize:"13px",paddingTop:"2px"},children:"Delete"})]})}()]})]}),Object(s.jsx)("hr",{}),Object(s.jsx)(C.a,{in:T,tag:"h5",className:"mt-3",children:T&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(s.jsx)("h5",{className:"text-secondary",children:o.username.toUpperCase()}),Object(s.jsx)("p",{className:"pb-2 text-warning",children:"is going to reply"})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(s.jsxs)(w.a,{onSubmit:W,children:[Object(s.jsx)(k.a,{children:Object(s.jsx)("textarea",{name:"text",id:"text",placeholder:"Write your comment here...",className:"form-control",pattern:".{100, 5000}",required:!0,minLength:"100",value:g,onChange:function(e){return N(e.target.value)}})}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"162px",fontSize:"13px",paddingTop:"2px"},children:"Submit Comment"})]}),Object(s.jsx)("button",{className:"btn btn-outline-danger mt-0",onClick:function(){return A()},style:{position:"relative",left:170,top:-25,height:"26px",width:"120px",fontSize:"13px",paddingTop:"2px"},children:"Cancel"})]})]}),Object(s.jsx)("hr",{})]})}),Object(s.jsx)(C.a,{in:E,tag:"h5",className:"mt-3",children:E&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(s.jsx)("h5",{className:"text-secondary",children:o.username.toUpperCase()}),Object(s.jsx)("p",{className:"pb-2 text-warning",children:"is going to modify"})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(s.jsxs)(w.a,{onSubmit:L,children:[Object(s.jsx)(k.a,{children:Object(s.jsx)("textarea",{name:"text",id:"text",placeholder:"Write your comment here...",className:"form-control",pattern:".{20, 5000}",required:!0,minLength:"20",defaultValue:r.text,onChange:function(e){return _(e.target.value)}})}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"162px",fontSize:"13px",paddingTop:"2px"},children:"Submit Updated Text"})]}),Object(s.jsx)("button",{className:"btn btn-outline-danger mt-0",onClick:function(){return J()},style:{position:"relative",left:170,top:-25,height:"26px",width:"120px",fontSize:"13px",paddingTop:"2px"},children:"Cancel"})]})]}),Object(s.jsx)("hr",{})]})})]},"sub"+r._id),r&&r.posts.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsxs)(m.a,{children:[Object(s.jsxs)(O.a,{xs:"12",sm:"3",children:[Object(s.jsx)("p",{className:"mb-0 text-success",children:"Replied by"}),Object(s.jsx)("h5",{className:"text-secondary pb-2",children:e.author.username.toUpperCase()})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"9",children:[Object(s.jsx)("p",{className:"mb-0",children:q(e.created)}),Object(s.jsx)("p",{className:"text-secondary mt-1 text-justify",children:e.text})]})]}),Object(s.jsx)("hr",{})]},"pos"+e._id)}))]})},P=c(61),I=c(62),E=c(63),D=c(64),R=c(65),M=function(e){var t=Object(n.useState)(!1),c=Object(d.a)(t,2),r=c[0],a=c[1],i=Object(n.useContext)(y),j=i.user,o=i.setUser,h=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/logout");case 2:o(null),localStorage.removeItem("token");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)(p.a,{className:"px-0",children:Object(s.jsxs)(P.a,{light:!0,expand:"md",className:"bg-warning bg-gradient rounded-bottom shadow mb-2",children:[Object(s.jsx)(l.b,{to:"/",className:"mr-auto navbar-brand text-datk font-weight-bold mb-0 pt-2 pb-0",children:Object(s.jsx)("h3",{children:"MRIDU FORUM"})}),Object(s.jsx)(I.a,{onClick:function(){return a(!r)}}),Object(s.jsx)(E.a,{isOpen:r,navbar:!0,children:Object(s.jsx)(D.a,{className:"ml-auto",navbar:!0,children:j?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(R.a,{children:Object(s.jsx)(l.b,{className:"text-dark mr-4",to:"/mypage",children:"MY PAGE"})}),Object(s.jsx)(R.a,{children:Object(s.jsx)(l.b,{className:"text-dark",onClick:h,to:"/",children:" LOGOUT"})})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(R.a,{children:Object(s.jsx)(l.b,{className:"text-dark mr-4",to:"/register",children:"REGISTER"})}),Object(s.jsx)(R.a,{children:Object(s.jsx)(l.b,{className:"text-dark",to:"/signin",children:"SIGN IN"})})]})})})]})})},z=function(){return Object(s.jsx)("div",{className:"footer bottom",children:Object(s.jsx)(p.a,{className:"bg-warning bg-gradient rounded-top mt-2",children:Object(s.jsx)(m.a,{children:Object(s.jsxs)("div",{className:"mx-auto pt-3",children:[Object(s.jsx)("p",{className:"mb-0 font-weight-bold",children:"\xa9 2021 MARUF AHMED"}),Object(s.jsx)("hr",{className:"my-0 bg-secondary"}),Object(s.jsx)("p",{className:"mb-0",children:"email: mriduava@gmail.com"}),Object(s.jsx)("p",{children:"github.com/mriduava/mridu-forum"})]})})})})},_=c(66),q=c(67),A=function(e){var t=Object(n.useContext)(y).setUser,c=Object(n.useState)(""),r=Object(d.a)(c,2),a=r[0],i=r[1],l=Object(n.useState)(""),j=Object(d.a)(l,2),o=j[0],h=j[1],x=Object(n.useState)(""),f=Object(d.a)(x,2),g=f[0],N=f[1],v=function(e,t){return!!(new RegExp("^[_A-z0-9]{1,}$").test(e)&&e.length>=t)},S=function(){var c=Object(b.a)(u.a.mark((function c(s){var n;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(s.preventDefault(),v(a,3)){c.next=4;break}return N("Username must be at least 3 characters without space!"),c.abrupt("return");case 4:if(v(o,6)){c.next=7;break}return N("Password must be at least 6 characters without space!"),c.abrupt("return");case 7:return n={username:a,password:o},c.next=10,fetch("/register",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(c){c.ok?(c=c.json(),Promise.resolve(c).then((function(e){return t(e)})),e.history.push("/signin")):N("Username is used!")})).catch((function(e){return Promise.reject()}));case 10:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(s.jsx)(p.a,{className:"border border-warning pb-5",style:{minHeight:"80vh"},children:Object(s.jsx)(m.a,{children:Object(s.jsxs)(O.a,{xs:"12",sm:"8",md:"6",lg:"5",className:"mx-auto m-5 border border-rounded p-5",children:[Object(s.jsx)("h4",{className:"text-dark font-weight-bold",children:"Registration"}),Object(s.jsx)("hr",{}),Object(s.jsxs)(w.a,{onSubmit:S,children:[Object(s.jsxs)(k.a,{children:[Object(s.jsx)(_.a,{for:"username",children:"Username"}),Object(s.jsx)(q.a,{type:"username",name:"username",id:"username",value:a,onChange:function(e){return i(e.target.value)},required:!0})]}),Object(s.jsxs)(k.a,{children:[Object(s.jsx)(_.a,{for:"password",children:"Password"}),Object(s.jsx)(q.a,{type:"password",name:"password",id:"password",value:o,onChange:function(e){return h(e.target.value)},required:!0})]}),Object(s.jsx)("button",{className:"btn btn-block btn-outline-success mt-4",children:"SUBMIT"}),Object(s.jsx)("div",{className:"pt-2 text-danger",children:g})]})]})})})},J=c(68),L=function(e){var t=Object(n.useContext)(y).setUser,c=Object(n.useState)(""),r=Object(d.a)(c,2),a=r[0],i=r[1],l=Object(n.useState)(""),j=Object(d.a)(l,2),o=j[0],h=j[1],x=Object(n.useState)(""),f=Object(d.a)(x,2),g=f[0],N=f[1],v=function(){var c=Object(b.a)(u.a.mark((function c(s){var n;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s.preventDefault(),n={username:a,password:o},c.next=4,fetch("/login",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(c){c.ok?(c=c.json(),Promise.resolve(c).then((function(e){t(e),localStorage.setItem("token",JSON.stringify(e))})),e.history.push("/mypage")):N("Username or Password incorrect!")})).catch((function(e){return Promise.reject()}));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(s.jsx)(p.a,{className:"border border-warning pb-5",style:{minHeight:"80vh"},children:Object(s.jsx)(m.a,{children:Object(s.jsxs)(O.a,{xs:"12",sm:"8",md:"6",lg:"5",className:"mx-auto m-5 border border-rounded p-5",children:[Object(s.jsx)("h4",{className:"text-dark font-weight-bold",children:"Sign in"}),Object(s.jsx)("hr",{}),Object(s.jsxs)(w.a,{onSubmit:v,children:[Object(s.jsxs)(k.a,{children:[Object(s.jsx)(_.a,{for:"username",children:"Username"}),Object(s.jsx)(q.a,{type:"username",name:"username",id:"username",value:a,onChange:function(e){return i(e.target.value)},required:!0}),Object(s.jsx)(J.a,{valid:!0,children:"Username is not correct!"})]}),Object(s.jsxs)(k.a,{children:[Object(s.jsx)(_.a,{for:"password",children:"Password"}),Object(s.jsx)(q.a,{type:"password",name:"password",id:"password",value:o,onChange:function(e){return h(e.target.value)},required:!0}),Object(s.jsx)(J.a,{children:"Wrong password!"})]}),Object(s.jsx)("button",{className:"btn btn-block btn-outline-success mt-4",children:"SUBMIT"}),Object(s.jsx)("div",{className:"pt-2 text-danger",children:g})]})]})})})},B=function(){return Object(s.jsx)("div",{children:Object(s.jsx)("h1",{children:"THIS IS AN ABOUT PAGE"})})},W=function(){var e=Object(n.useContext)(h).subjects,t=Object(n.useState)(""),c=Object(d.a)(t,2),r=c[0],a=c[1],i=Object(n.useState)(""),l=Object(d.a)(i,2),j=l[0],o=l[1],x=Object(n.useState)(""),m=Object(d.a)(x,2),O=m[0],p=m[1],f=Object(n.useState)(""),g=Object(d.a)(f,2),N=g[0],v=g[1];Object(n.useEffect)((function(){var e=setTimeout((function(){null!==N&&v(null)}),3e3);return function(){return clearTimeout(e)}}),[N]);var y=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/forums/".concat(r),{method:"POST",body:JSON.stringify({topic:j,text:O}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){e.ok?(v("Thread submission successful!"),a(""),o(""),p("")):v("Thread submission failed!")})).catch((function(e){return Promise.reject()}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(w.a,{className:"mt-3 mb-4",onSubmit:y,children:[Object(s.jsx)(k.a,{children:e&&Object(s.jsxs)(q.a,{type:"select",name:"select",id:"exampleSelect",required:!0,onChange:function(e){return a(e.target.value)},children:[Object(s.jsx)("option",{value:"",children:"Select a Sub-Forum"}),e.map((function(e,t){return Object(s.jsx)("option",{value:e._id,children:e.subject},"sub"+e._id+t)}))]})}),Object(s.jsx)(k.a,{children:Object(s.jsx)(q.a,{type:"text",name:"topic",id:"topic",placeholder:"Write a title...",minLength:"6",value:j,onChange:function(e){return o(e.target.value)},required:!0})}),Object(s.jsx)(k.a,{children:Object(s.jsx)(q.a,{type:"textarea",name:"text",id:"text",placeholder:"Write in detail...",minLength:"15",value:O,onChange:function(e){return p(e.target.value)},required:!0})}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"190px",fontSize:"13px",paddingTop:"2px"},children:"Submit Thread"})]}),N&&Object(s.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:N}),Object(s.jsx)("hr",{})]})},H=function(){var e=Object(n.useContext)(y).user,t=Object(n.useState)([]),c=Object(d.a)(t,2),r=c[0],a=c[1];Object(n.useEffect)((function(){(function(){var t=Object(b.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/search/mythreads?username=".concat(e.username));case 2:return c=t.sent,t.next=5,c.json();case 5:c=t.sent,a(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.username]);return Object(s.jsx)(m.a,{children:Object(s.jsx)(O.a,{lg:"12",children:Object(s.jsx)("div",{className:"my-threads",children:r&&r.map((function(e,t){return Object(s.jsx)("ul",{children:Object(s.jsxs)("li",{children:[t+1,".",Object(s.jsxs)("span",{children:[" ",e.topic]})]})},"sub"+e._id+t)}))})})})},G=function(){var e=Object(n.useContext)(h).fetchFroums,t=Object(n.useState)(""),c=Object(d.a)(t,2),r=c[0],a=c[1],i=Object(n.useState)(""),l=Object(d.a)(i,2),j=l[0],o=l[1],x=Object(n.useState)(),m=Object(d.a)(x,2),O=m[0],p=m[1];Object(n.useEffect)((function(){var e=setTimeout((function(){null!==O&&p(null)}),3e3);return function(){return clearTimeout(e)}}),[O]);var f=function(){var t=Object(b.a)(u.a.mark((function t(c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,fetch("/api/forums/",{method:"POST",body:JSON.stringify({subject:r,description:j}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){e(),t.ok?(p("Sub-Forum submission successful!"),a(""),o("")):p("Sub-Forum submission failed!")})).catch((function(e){return Promise.reject()}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(w.a,{className:"mt-3 mb-4",onSubmit:f,children:[Object(s.jsx)(k.a,{children:Object(s.jsx)(q.a,{type:"select",name:"select",id:"exampleSelect",disabled:!0,children:Object(s.jsx)("option",{value:"",disabled:!0,children:"Select a Sub-Forum"})})}),Object(s.jsx)(k.a,{children:Object(s.jsx)(q.a,{type:"text",name:"topic",id:"topic",placeholder:"Write a forum subject..",value:r,onChange:function(e){return a(e.target.value)},required:!0})}),Object(s.jsx)(k.a,{children:Object(s.jsx)(q.a,{type:"textarea",name:"text",id:"text",placeholder:"Write forum description...",value:j,onChange:function(e){return o(e.target.value)},required:!0})}),Object(s.jsx)("button",{className:"btn btn-outline-success mt-0",style:{height:"26px",width:"190px",fontSize:"13px",paddingTop:"2px"},children:"Submit Sub-Forum"})]}),O&&Object(s.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:O}),Object(s.jsx)("hr",{})]})},Y=function(){var e=Object(n.useContext)(y).user,t=Object(n.useState)(!0),c=Object(d.a)(t,2),r=c[0],a=c[1],i=function(){return a(!r)},l=Object(n.useState)(!0),j=Object(d.a)(l,2),o=j[0],h=j[1],x=function(){return h(!o)},f=Object(n.useState)(""),g=Object(d.a)(f,2),N=g[0],v=g[1],S=Object(n.useState)(null),C=Object(d.a)(S,2),T=C[0],U=C[1],F=Object(n.useState)(""),P=Object(d.a)(F,2),I=P[0],E=P[1],D=Object(n.useState)(null),R=Object(d.a)(D,2),M=R[0],z=R[1],_=Object(n.useState)(null),A=Object(d.a)(_,2),L=A[0],B=A[1],Y=Object(n.useState)(null),V=Object(d.a)(Y,2),$=V[0],K=V[1],Q=Object(n.useState)(null),X=Object(d.a)(Q,2),Z=X[0],ee=X[1],te=function(){var e=Object(b.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/search/user?username=".concat(N,"&role=").concat(N));case 3:return c=e.sent,e.next=6,c.json();case 6:c=e.sent,U(c),v("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users/".concat(t),{method:"DELETE"}).then((function(e){e.ok&&(B(null),ee("The user has been deleted!"))})).catch((function(e){return Promise.reject()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e,t,c){z(e),B(t),K(c),U(null),E(c)},ne=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/users?username=".concat(L),{method:"PUT",body:JSON.stringify({role:I}),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?(B(null),ee("Role setting successful!")):ee("Role setting failed!")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=setTimeout((function(){null!==Z&&ee(null)}),3e3);return function(){return clearTimeout(e)}}),[Z]);return Object(s.jsxs)(p.a,{className:"border border-warning pb-5",style:{minHeight:"80vh"},children:[Object(s.jsx)(m.a,{className:"d-flex flex-column",children:Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(s.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(s.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(s.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(s.jsx)("hr",{}),Object(s.jsxs)(m.a,{className:"mx-auto",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)(m.a,{className:"d-flex",children:Object(s.jsxs)(O.a,{lg:"12",className:"d-flex justify-content-between",children:[Object(s.jsx)("button",{className:"btn btn-outline-primary m-0",disabled:o,onClick:x,children:"Create a Thread"}),Object(s.jsx)("button",{className:"btn btn-outline-primary align-self-end ",disabled:!o,onClick:x,children:"Create a Sub-Forum"})]})}),Object(s.jsx)("hr",{className:"ml-1"}),o?Object(s.jsx)(W,{}):Object(s.jsx)(G,{})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)(m.a,{className:"d-flex",children:Object(s.jsxs)(O.a,{lg:"12",className:"d-flex justify-content-between",children:[Object(s.jsx)("button",{className:"btn btn-outline-info ml-lg-3",disabled:r,onClick:i,children:"My Threads"}),Object(s.jsx)("button",{className:"btn btn-outline-info mr-0",disabled:!r,onClick:i,children:"Modify User"})]})}),Object(s.jsx)("hr",{className:"ml-lg-3"}),Object(s.jsx)("div",{className:"ml-lg-3 mt-3",children:r?Object(s.jsx)("div",{children:Object(s.jsx)(H,{})}):Object(s.jsx)("div",{children:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(m.a,{className:"d-flex flex-column",children:[Object(s.jsx)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:Object(s.jsxs)(w.a,{onSubmit:te,className:"d-flex",children:[Object(s.jsxs)(k.a,{children:[Object(s.jsx)(q.a,{type:"username",name:"username",id:"username",placeholder:"Search user",className:"border border-secondary",style:{height:"32px"},value:N,onChange:function(e){return v(e.target.value)},required:!0}),Object(s.jsx)(J.a,{valid:!0,children:"Username is not correct!"})]}),Object(s.jsx)("button",{className:"btn btn-outline-secondary py-0",style:{height:"32px",width:"120px"},children:"Search"})]})}),Object(s.jsxs)("div",{style:{fontSize:"14px"},children:[Object(s.jsx)("p",{className:"ml-3",children:"Searh user by username or role. "}),Object(s.jsx)("p",{className:"ml-3",style:{marginTop:"-15px"},children:"To modify a user, click on the username."})]})]}),T&&T.map((function(e,t){return Object(s.jsxs)("div",{children:[Object(s.jsx)("hr",{}),Object(s.jsx)(m.a,{className:"pt-2 found_user",style:{cursor:"pointer"},onClick:function(){return se(e._id,e.username,e.role)},children:Object(s.jsxs)(O.a,{xs:"9",sm:"8",children:[Object(s.jsx)("h4",{className:"text-secondary mt-1 pb-0",children:e.username}),Object(s.jsxs)("p",{className:"text-primary mt-0 pt-0",children:["role: ",e.role]})]})})]},"sub"+e._id+t)})),Object(s.jsx)("hr",{}),L&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"bg-success pt-2 pl-0 ml-0 mb-3 pb-0",style:{height:"40px",hover:{color:"white"}},children:Object(s.jsx)("h5",{className:"pl-2 text-light pb-0",children:"Modify User"})}),Object(s.jsxs)(m.a,{className:"pl-1",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"12",lg:"6",children:[Object(s.jsx)("h5",{children:"Username"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{className:"text-info mt-2 p-0",children:L}),Object(s.jsxs)("p",{className:"text-success mt-0 pt-0",children:["Present Role: ",$]})]}),Object(s.jsx)("button",{className:"btn btn-outline-danger mt-3",onClick:function(){return ce(M)},style:{height:"30px",width:"150px",fontSize:"16px",paddingTop:"2px"},children:"Delete User"})]}),Object(s.jsx)(O.a,{xs:"12",sm:"12",lg:"6",children:Object(s.jsxs)(w.a,{onSubmit:ne,children:[Object(s.jsx)("h5",{className:"py-0",children:"Set role"}),Object(s.jsxs)("div",{className:"form-check",children:[Object(s.jsx)("input",{type:"radio",className:"mt-2",value:"admin",checked:"admin"===I,onChange:function(e){return E(e.target.value)}}),Object(s.jsx)("label",{className:"form-check-label pl-2",children:"admin"})]}),Object(s.jsxs)("div",{className:"form-check",children:[Object(s.jsx)("input",{type:"radio",className:"mt-2",value:"moderator",checked:"moderator"===I,onChange:function(e){return E(e.target.value)}}),Object(s.jsx)("label",{className:"form-check-label pl-2",children:"moderator"})]}),Object(s.jsxs)("div",{className:"form-check",children:[Object(s.jsx)("input",{type:"radio",className:"mt-2",value:"general",checked:"general"===I,onChange:function(e){return E(e.target.value)}}),Object(s.jsx)("label",{className:"form-check-label pl-2 mt-0",children:"general"})]}),Object(s.jsx)("button",{className:"btn btn-outline-success my-3",style:{height:"30px",width:"150px",fontSize:"16px",paddingTop:"2px"},children:"Set Role"})]})})]}),Object(s.jsx)("hr",{style:{height:"23px"}})]}),Z&&Object(s.jsx)("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:Z})]})})})]})]})]})},V=function(){var e=Object(n.useContext)(y).user;return Object(s.jsxs)(p.a,{className:"border border-warning pb-5",style:{minHeight:"80vh"},children:[Object(s.jsx)(m.a,{className:"d-flex flex-column",children:Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(s.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(s.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(s.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(s.jsx)("hr",{}),Object(s.jsxs)(m.a,{className:"mx-auto",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)("h4",{className:"ml-0",children:"Create a thread"}),Object(s.jsx)("hr",{className:"ml-1"}),Object(s.jsx)(W,{})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)("h4",{className:"ml-lg-3 mt-xs-5",children:"My threads"}),Object(s.jsx)("hr",{className:"ml-lg-3"}),Object(s.jsx)("div",{className:"ml-lg-3 mt-4",children:Object(s.jsx)(H,{})})]})]})]})},$=function(){var e=Object(n.useContext)(y).user;return Object(s.jsxs)(p.a,{className:"border border-warning pb-5",style:{minHeight:"80vh"},children:[Object(s.jsx)(m.a,{className:"d-flex flex-column",children:Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"12",lg:"12",className:"pl-3 pt-0",children:[Object(s.jsx)("h1",{className:"text-info font-weight-bold pt-5 ml-3",children:e&&e.username.toUpperCase()}),Object(s.jsxs)("h6",{className:"text-secondary ml-3",children:["ROLE: ",Object(s.jsx)("span",{className:"text-success",children:e&&e.role.toUpperCase()})]})]})}),Object(s.jsx)("hr",{}),Object(s.jsxs)(m.a,{className:"mx-auto",children:[Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)("h4",{className:"ml-0",children:"Create a thread"}),Object(s.jsx)("hr",{className:"ml-1"}),Object(s.jsx)(W,{})]}),Object(s.jsxs)(O.a,{xs:"12",sm:"12",md:"6",lg:"6",children:[Object(s.jsx)("h4",{className:"ml-lg-3 mt-xs-5",children:"My threads"}),Object(s.jsx)("hr",{className:"ml-lg-3"}),Object(s.jsx)("div",{className:"ml-lg-3 mt-4",children:Object(s.jsx)(H,{})})]})]})]})},K=function(){var e=Object(n.useContext)(y).user;return Object(s.jsx)(s.Fragment,{children:null!==e&&"admin"===e.role?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Y,{})}):null!==e&&"moderator"===e.role?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(V,{})}):Object(s.jsx)(s.Fragment,{children:Object(s.jsx)($,{})})})},Q=c(18),X=c(32),Z=function(e){var t=e.component,c=Object(X.a)(e,["component"]),r=Object(n.useContext)(y).user;return Object(s.jsx)(j.b,Object(Q.a)(Object(Q.a)({},c),{},{render:function(e){return r?Object(s.jsx)(t,Object(Q.a)(Object(Q.a)({},c),e)):Object(s.jsx)(j.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ee=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(S,{children:Object(s.jsx)(x,{children:Object(s.jsxs)(l.a,{children:[Object(s.jsx)(M,{}),Object(s.jsx)("div",{className:"content",children:Object(s.jsxs)(j.d,{children:[Object(s.jsx)(Z,{exact:!0,path:"/mypage",component:K}),Object(s.jsx)(j.b,{exact:!0,path:"/",component:N}),Object(s.jsx)(j.b,{exact:!0,path:"/register",component:A}),Object(s.jsx)(j.b,{exact:!0,path:"/signin",component:L}),Object(s.jsx)(j.b,{exact:!0,path:"/about",component:B}),Object(s.jsx)(j.b,{exact:!0,path:"/:id",component:v}),Object(s.jsx)(j.b,{exact:!0,path:"/:id1/:id2",component:F})]})}),Object(s.jsx)(z,{})]})})})})};c(53);i.a.render(Object(s.jsx)(r.a.Fragment,{children:Object(s.jsx)(ee,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.caaab398.chunk.js.map